{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/d3-force/node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-force/node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-force/src/lcg.js","webpack:///./node_modules/d3-force/src/simulation.js","webpack:///./node_modules/d3-force/src/constant.js","webpack:///./node_modules/d3-force/src/jiggle.js","webpack:///./node_modules/d3-force/src/link.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/add.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/cover.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/quad.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/x.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/y.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/quadtree.js","webpack:///./node_modules/d3-force/src/collide.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/data.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/extent.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/find.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/remove.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/root.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/size.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/visit.js","webpack:///./node_modules/d3-force/node_modules/d3-quadtree/src/visitAfter.js","webpack:///./public/app/plugins/panel/nodeGraph/layout.worker.js","webpack:///./node_modules/d3-force/src/x.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","noop","dispatch","arguments","length","_","test","Error","Dispatch","this","parseTypenames","typenames","types","trim","split","map","indexOf","slice","type","set","callback","concat","push","constructor","on","typename","T","copy","that","args","Array","apply","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","f","setTimeout","clearNow","Timer","_call","_time","_next","timer","delay","time","restart","wake","e","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","TypeError","stop","initialAngle","Math","PI","sqrt","simulation","alpha","alphaMin","alphaDecay","pow","alphaTarget","velocityDecay","forces","Map","stepper","step","event","random","lcg","tick","iterations","node","nodes","undefined","k","forEach","force","fx","x","vx","fy","y","vy","initializeNodes","index","isNaN","radius","angle","cos","sin","initializeForce","initialize","randomSource","delete","find","dx","dy","d2","closest","nodeById","nodeId","tree","parent","xm","ym","xp","yp","right","bottom","j","_root","leaf","data","x0","_x0","y0","_y0","x1","_x1","y1","_y1","_x","_y","next","defaultX","defaultY","quadtree","Quadtree","NaN","addAll","leaf_copy","treeProto","child","source","target","pop","add","cover","xz","yz","floor","z","visit","extent","x2","y2","q","x3","y3","quads","remove","retainer","previous","removeAll","root","size","visitAfter","layout","edges","config","roots","secondLevelRoots","alreadyPositioned","nodesMap","reduce","acc","id","edgesMap","edge","sourceId","filter","incoming","rootY","graphLevel","nextGraphLevel","initializePositions","strengths","distances","count","bias","strength","link","min","distance","constant","links","b","jiggle","initializeStrength","initializeDistance","_nodes","_random","linkDistance","linkStrength","forceX","forceXStrength","radii","xi","yi","ri","ri2","prepare","quad","rj","forceCollide","bounds","top","left","center","graphBounds","centerNodes","addEventListener","postMessage"],"mappings":"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","file":"layout.worker.9ffcb8c26ead8fb3ac88.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"public/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"Cz29\");\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n","import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries don’t change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function(radius) {\n  var nodes,\n      radii,\n      random,\n      strength = 1,\n      iterations = 1;\n\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i, n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data, rj = quad.r, r = ri + rj;\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n          if (l < r * r) {\n            if (x === 0) x = jiggle(random), l += x * x;\n            if (y === 0) y = jiggle(random), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n        return;\n      }\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    radii = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant can’t contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","import { forceSimulation, forceLink, forceCollide, forceX } from 'd3-force';\n\naddEventListener('message', (event) => {\n  const { nodes, edges, config } = event.data;\n  layout(nodes, edges, config);\n  postMessage({ nodes, edges });\n});\n\n/**\n * Use d3 force layout to lay the nodes in a sensible way. This function modifies the nodes adding the x,y positions\n * and also fills in node references in edges instead of node ids.\n */\nexport function layout(nodes, edges, config) {\n  // Start with some hardcoded positions so it starts laid out from left to right\n  let { roots, secondLevelRoots } = initializePositions(nodes, edges);\n\n  // There always seems to be one or more root nodes each with single edge and we want to have them static on the\n  // left neatly in something like grid layout\n  [...roots, ...secondLevelRoots].forEach((n, index) => {\n    n.fx = n.x;\n  });\n\n  const simulation = forceSimulation(nodes)\n    .force(\n      'link',\n      forceLink(edges)\n        .id((d) => d.id)\n        .distance(config.linkDistance)\n        .strength(config.linkStrength)\n    )\n    // to keep the left to right layout we add force that pulls all nodes to right but because roots are fixed it will\n    // apply only to non root nodes\n    .force('x', forceX(config.forceX).strength(config.forceXStrength))\n    // Make sure nodes don't overlap\n    .force('collide', forceCollide(config.forceCollide));\n\n  // 300 ticks for the simulation are recommended but less would probably work too, most movement is done in first\n  // few iterations and then all the forces gets smaller https://github.com/d3/d3-force#simulation_alphaDecay\n  simulation.tick(config.tick);\n  simulation.stop();\n\n  // We do centering here instead of using centering force to keep this more stable\n  centerNodes(nodes);\n}\n\n/**\n * This initializes positions of the graph by going from the root to it's children and laying it out in a grid from left\n * to right. This works only so, so because service map graphs can have cycles and children levels are not ordered in a\n * way to minimize the edge lengths. Nevertheless this seems to make the graph easier to nudge with the forces later on\n * than with the d3 default initial positioning. Also we can fix the root positions later on for a bit more neat\n * organisation.\n *\n * This function directly modifies the nodes given and only returns references to root nodes so they do not have to be\n * found again later on.\n *\n * How the spacing could look like approximately:\n * 0 - 0 - 0 - 0\n *  \\- 0 - 0   |\n *      \\- 0 -/\n * 0 - 0 -/\n */\nfunction initializePositions(nodes, edges) {\n  // To prevent going in cycles\n  const alreadyPositioned = {};\n\n  const nodesMap = nodes.reduce((acc, node) => {\n    acc[node.id] = node;\n    return acc;\n  }, {});\n  const edgesMap = edges.reduce((acc, edge) => {\n    const sourceId = edge.source;\n    acc[sourceId] = [...(acc[sourceId] || []), edge];\n    return acc;\n  }, {});\n\n  let roots = nodes.filter((n) => n.incoming === 0);\n\n  // For things like service maps we assume there is some root (client) node but if there is none then selecting\n  // any node as a starting point should work the same.\n  if (!roots.length) {\n    roots = [nodes[0]];\n  }\n\n  let secondLevelRoots = roots.reduce((acc, r) => {\n    acc.push(...(edgesMap[r.id] ? edgesMap[r.id].map((e) => nodesMap[e.target]) : []));\n    return acc;\n  }, []);\n\n  const rootYSpacing = 300;\n  const nodeYSpacing = 200;\n  const nodeXSpacing = 200;\n\n  let rootY = 0;\n  for (const root of roots) {\n    let graphLevel = [root];\n    let x = 0;\n    while (graphLevel.length > 0) {\n      const nextGraphLevel = [];\n      let y = rootY;\n      for (const node of graphLevel) {\n        if (alreadyPositioned[node.id]) {\n          continue;\n        }\n        // Initialize positions based on the spacing in the grid\n        node.x = x;\n        node.y = y;\n        alreadyPositioned[node.id] = true;\n\n        // Move to next Y position for next node\n        y += nodeYSpacing;\n        if (edgesMap[node.id]) {\n          nextGraphLevel.push(...edgesMap[node.id].map((edge) => nodesMap[edge.target]));\n        }\n      }\n\n      graphLevel = nextGraphLevel;\n      // Move to next X position for next level\n      x += nodeXSpacing;\n      // Reset Y back to baseline for this root\n      y = rootY;\n    }\n    rootY += rootYSpacing;\n  }\n  return { roots, secondLevelRoots };\n}\n\n/**\n * Makes sure that the center of the graph based on it's bound is in 0, 0 coordinates.\n * Modifies the nodes directly.\n */\nfunction centerNodes(nodes) {\n  const bounds = graphBounds(nodes);\n  for (let node of nodes) {\n    node.x = node.x - bounds.center.x;\n    node.y = node.y - bounds.center.y;\n  }\n}\n\n/**\n * Get bounds of the graph meaning the extent of the nodes in all directions.\n */\nfunction graphBounds(nodes) {\n  if (nodes.length === 0) {\n    return { top: 0, right: 0, bottom: 0, left: 0, center: { x: 0, y: 0 } };\n  }\n\n  const bounds = nodes.reduce(\n    (acc, node) => {\n      if (node.x > acc.right) {\n        acc.right = node.x;\n      }\n      if (node.x < acc.left) {\n        acc.left = node.x;\n      }\n      if (node.y > acc.bottom) {\n        acc.bottom = node.y;\n      }\n      if (node.y < acc.top) {\n        acc.top = node.y;\n      }\n      return acc;\n    },\n    { top: Infinity, right: -Infinity, bottom: -Infinity, left: Infinity }\n  );\n\n  const y = bounds.top + (bounds.bottom - bounds.top) / 2;\n  const x = bounds.left + (bounds.right - bounds.left) / 2;\n\n  return {\n    ...bounds,\n    center: {\n      x,\n      y,\n    },\n  };\n}\n","import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n"],"sourceRoot":""}