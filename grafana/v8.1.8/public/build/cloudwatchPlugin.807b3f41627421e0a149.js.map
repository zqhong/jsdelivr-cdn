{"version":3,"sources":["webpack:///./public/app/plugins/datasource/cloudwatch/query_parameter_ctrl.ts","webpack:///./public/app/plugins/datasource/cloudwatch/components/ThrottlingErrorMessage.tsx","webpack:///./public/app/plugins/datasource/cloudwatch/memoizedDebounce.ts","webpack:///./public/app/plugins/datasource/cloudwatch/types.ts","webpack:///./public/app/plugins/datasource/cloudwatch/language_provider.ts","webpack:///./public/app/plugins/datasource/cloudwatch/utils/rxjs/increasingInterval.ts","webpack:///./public/app/plugins/datasource/cloudwatch/datasource.ts","webpack:///./public/app/plugins/datasource/cloudwatch/annotations_query_ctrl.ts","webpack:///./node_modules/common-tags/es/TemplateTag/TemplateTag.js","webpack:///./node_modules/common-tags/es/trimResultTransformer/trimResultTransformer.js","webpack:///./node_modules/common-tags/es/stripIndentTransformer/stripIndentTransformer.js","webpack:///./node_modules/common-tags/es/replaceResultTransformer/replaceResultTransformer.js","webpack:///./node_modules/common-tags/es/replaceSubstitutionTransformer/replaceSubstitutionTransformer.js","webpack:///./node_modules/common-tags/es/inlineArrayTransformer/inlineArrayTransformer.js","webpack:///./node_modules/common-tags/es/splitStringTransformer/splitStringTransformer.js","webpack:///./node_modules/common-tags/es/removeNonPrintingValuesTransformer/removeNonPrintingValuesTransformer.js","webpack:///./node_modules/common-tags/es/stripIndent/stripIndent.js","webpack:///./node_modules/common-tags/es/commaLists/commaLists.js","webpack:///./node_modules/common-tags/es/commaListsAnd/commaListsAnd.js","webpack:///./node_modules/common-tags/es/commaListsOr/commaListsOr.js","webpack:///./node_modules/common-tags/es/html/html.js","webpack:///./node_modules/common-tags/es/safeHtml/safeHtml.js","webpack:///./node_modules/common-tags/es/oneLine/oneLine.js","webpack:///./node_modules/common-tags/es/oneLineTrim/oneLineTrim.js","webpack:///./node_modules/common-tags/es/oneLineCommaLists/oneLineCommaLists.js","webpack:///./node_modules/common-tags/es/oneLineCommaListsOr/oneLineCommaListsOr.js","webpack:///./node_modules/common-tags/es/oneLineCommaListsAnd/oneLineCommaListsAnd.js","webpack:///./node_modules/common-tags/es/inlineLists/inlineLists.js","webpack:///./node_modules/common-tags/es/oneLineInlineLists/oneLineInlineLists.js","webpack:///./node_modules/common-tags/es/stripIndents/stripIndents.js","webpack:///./public/app/plugins/datasource/cloudwatch/components/LogsCheatSheet.tsx","webpack:///./public/app/plugins/datasource/cloudwatch/module.tsx","webpack:///./public/app/plugins/datasource/cloudwatch/components/ConfigEditor.tsx"],"names":["CloudWatchQueryParameterCtrl","constructor","$scope","templateSrv","uiSegmentSrv","init","target","namespace","metricName","statistics","dimensions","period","region","id","expression","regionSegment","getSegmentForValue","namespaceSegment","metricSegment","dimSegments","reduce","memo","value","key","push","newKey","newOperator","newKeyValue","statSegments","map","stat","ensurePlusButton","removeDimSegment","newSegment","fake","removeStatSegment","isEmpty","onChange","getStatSegments","Promise","resolve","flatten","angular","copy","datasource","standardStatistics","s","statSegmentChanged","segment","index","splice","type","seg","segments","count","length","lastSegment","Math","max","newPlusButton","getDimSegments","$index","query","getDimensionKeys","dimensionKey","getDimensionValues","then","transformToSegments","results","dimSegmentChanged","newFake","cssClass","syncDimSegmentsWithModel","dims","i","keySegment","valueSegment","getRegions","metricFindQuery","unshift","text","getNamespaces","getMetrics","regionChanged","namespaceChanged","metricChanged","addTemplateVars","expandable","each","getVariables","variable","name","coreModule","directive","templateUrl","controller","restrict","scope","ThrottlingErrorMessage","rel","className","href","func","wait","mem","memoize","args","debounce","leading","JSON","stringify","CloudWatchLogsQueryStatus","CloudWatchLanguageProvider","LanguageProvider","initialValues","super","replace","trim","url","params","this","awsRequest","toPromise","startTask","started","async","fetchedFieldsCache","Date","now","time","sortedUniq","logGroups","join","fields","all","logGroup","getLogGroupFields","logGroupName","Set","acc","cur","concat","logGroupFields","f","values","suggs","getFieldCompletionItems","context","logGroupNames","functionSuggestions","searchFunctionType","SearchFunctionType","Prefix","label","items","STRING_FUNCTIONS","DATETIME_FUNCTIONS","IP_FUNCTIONS","suggestions","commandToken","curToken","queryCommand","content","toLowerCase","prevToken","prevNonWhitespaceToken","currentTokenIsFirstArg","handleSortCommand","currentTokenIsAfterCommandAndEmpty","isTokenType","next","currentTokenIsAfterCommand","token","types","includes","nextNonWhitespaceToken","currentTokenIsComma","currentTokenIsCommaOrAfterComma","typeaheadOutput","getFieldAndFilterFunctionCompletionItems","getStatsAggCompletionItems","forEach","group","skipFilter","sugg","boolFuncs","getBoolFuncCompletionItems","fieldsSuggestions","comparisonSuggestions","getComparisonCompletionItems","QUERY_COMMANDS","FIELD_AND_FILTER_FUNCTIONS","AGGREGATION_FUNCTIONS_STATS","BOOLEAN_FUNCTIONS","NUMERIC_OPERATORS","fetchFields","field","insertText","match","undefined","Object","assign","getSyntax","syntax","isStatsQuery","grammar","Prism","tokenize","find","toString","input","tokens","data","get","filter","offsets","start","selection","offset","end","isFirstToken","prev","getCommandCompletionItems","parenthesisToken","maybeFunctionToken","funcsWithFieldArgs","isInsideFunctionParenthesis","keyword","maybeKeyword","getPreviousTokenExcluding","isAfterKeyword","handleKeyword","handleComparison","startToken","thisToken","previousCommandToken","handleCommand","isFirstArgument","funcName","exclude","main","item","dispatch","state","subscriber","counter","step","endPeriod","newPeriod","min","schedule","displayAlert","datasourceName","store","notifyApp","createErrorNotification","React","createElement","displayCustomError","title","message","CloudWatchDatasource","DataSourceWithBackend","instanceSettings","getTemplateSrv","timeSrv","getTimeSrv","memoizedDebounce","AppNotificationTimeout","Error","logQueries","options","validLogQueries","of","error","LoadingState","Done","queryParams","intervalMs","maxDataPoints","datasourceId","queryString","scopedVars","refId","statsGroups","getActualRegion","range","timeRange","requestParams","from","valueOf","to","queries","pipe","mergeMap","response","channelName","toDataQueryResponse","targets","meta","custom","getGrafanaLiveSrv","getStream","LiveChannelScope","Plugin","path","e","dataQueryResponse","every","dataFrame","status","Complete","Cancelled","Failed","Timeout","Loading","keys","addDataLinksToLogsResponse","catchError","err","makeLogActionRequest","dataFrames","logsQuery","queryId","metricQueries","validMetricsQueries","convertDimensionFormat","String","getPeriod","some","indexOf","matches","exec","request","performTimeSeriesQuery","row","limit","direction","logStreamField","logField","startFromHead","parseLogGroupName","rowIndex","logStreamName","endTime","timeEpochMs","startTime","metricsQueries","queryMode","proxyUrl","defaultRegion","jsonData","languageProvider","hide","getTargetsByQueryMode","dataQueryResponses","config","liveEnabled","handleLiveLogQueries","handleLogQueries","handleMetricQueries","merge","param","statsQuery","startPeriod","scheduler","asyncScheduler","Observable","add","increasingInterval","concatMap","_","repeat","share","consecutiveFailedAttempts","scan","failures","prevRecordsMatched","frames","frame","recordsMatched","stats","displayName","queryResponse","zip","tap","hasOwnProperty","failedAttempts","set","DataQueryErrorType","takeWhile","observable","onUnsubscribe","stopQueries","innerSub","subscribe","val","complete","unsubscribe","toISOString","curTarget","interpolatedGroups","urlProps","timeType","tz","editorString","isLiveTail","source","encodedUrl","encodeUrl","links","targetBlank","logQuery","finalize","toArray","fieldNames","fieldPercentages","percent","v","test","parseInt","rangeUtil","intervalToSeconds","res","dataframes","curr","failedRedIds","debouncedAlert","throwError","transformSuggestDataFromDataframes","suggestData","toLegacyResponseData","rows","doMetricQueryRequest","subtype","parameters","r","makeReplacements","resultsToDataFrames","regions","filterDimensions","getEbsVolumeIds","instanceId","getEc2InstanceAttribute","attributeName","filters","getResourceARNs","resourceType","tags","filterJson","metricNameQuery","dimensionKeysQuery","dimensionValuesQuery","parse","ebsVolumeIdsQuery","ec2InstanceAttributeQuery","targetAttributeName","resourceARNsQuery","tagsJSON","annotationQuery","annotation","defaultPeriod","prefixMatching","actionPrefix","alarmNamePrefix","targetContainsTemplate","variableExists","k","toTestingStatus","method","getBackendSrv","fetch","result","getDefaultRegion","showContextToggle","convertToCloudWatchTime","date","roundUp","isString","dateMath","round","entries","Array","isArray","valueVar","getVariableName","multi","split","displayErrorIfIsMultiTemplateVariable","fieldName","debouncedCustomAlert","getQueryDisplayText","interpolateVariablesInQueries","interpolateMetricsQueryVariables","alias","logIdentifier","colonIndex","lastIndexOf","substr","CloudWatchAnnotationsQueryCtrl","ctrl","defaultsDeep","matchExact","bind","strings","raw","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","prototype","_templateObject","freeze","_classCallCheck","instance","TypeError","TemplateTag","_this","_len","arguments","transformers","_key","tag","_len2","expressions","_key2","interimTag","transformEndResult","transformString","processSubstitutions","transformer","previousTag","template","_len3","substitutions","_key3","apply","resultSoFar","remainingPart","substitution","transformSubstitution","shift","str","transform","onString","onSubstitution","endResult","onEndResult","side","_toConsumableArray","arr","arr2","indent","el","regexp","RegExp","replaceWhat","replaceWith","defaults","separator","conjunction","serial","opts","arrayLength","separatorIndex","slice","splitBy","isValidValue","x","Number","isNaN","CLIQ_EXAMPLES","category","examples","expr","stripIndents","stripIndent","renderHighlightedMarkup","code","keyPrefix","tokenizer","spans","flattenTokens","aliases","exampleCategory","css","LogsCheatSheet","PureComponent","onClickExample","renderExpression","onClick","renderLogsCheatSheet","cat","cx","j","render","plugin","DataSourcePlugin","setQueryEditorHelp","setConfigEditor","setDatasource","useState","addWarning","createWarningNotification","useEffect","getDatasourceSrv","loadDatasource","authType","profile","database","loadRegions","labelWidth","tooltip","width","placeholder","customMetricsNamespaces","onUpdateDatasourceJsonDataOption","setQueryEditor","PanelQueryEditor","setExploreMetricsQueryField","setExploreLogsQueryField","CloudWatchLogsQueryEditor","setAnnotationQueryCtrl","setChannelSupport","LiveMeasurementsSupport"],"mappings":"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","file":"cloudwatchPlugin.807b3f41627421e0a149.js","sourcesContent":["import angular from 'angular';\nimport coreModule from 'app/core/core_module';\nimport { each, flatten, isEmpty, map, reduce } from 'lodash';\nimport { TemplateSrv } from '@grafana/runtime';\n\nexport class CloudWatchQueryParameterCtrl {\n  /** @ngInject */\n  constructor($scope: any, templateSrv: TemplateSrv, uiSegmentSrv: any) {\n    $scope.init = () => {\n      const target = $scope.target;\n      target.namespace = target.namespace || '';\n      target.metricName = target.metricName || '';\n      target.statistics = target.statistics || ['Average'];\n      target.dimensions = target.dimensions || {};\n      target.period = target.period || '';\n      target.region = target.region || 'default';\n      target.id = target.id || '';\n      target.expression = target.expression || '';\n\n      $scope.regionSegment = uiSegmentSrv.getSegmentForValue($scope.target.region, 'select region');\n      $scope.namespaceSegment = uiSegmentSrv.getSegmentForValue($scope.target.namespace, 'select namespace');\n      $scope.metricSegment = uiSegmentSrv.getSegmentForValue($scope.target.metricName, 'select metric');\n\n      $scope.dimSegments = reduce(\n        $scope.target.dimensions,\n        (memo, value, key) => {\n          memo.push(uiSegmentSrv.newKey(key));\n          memo.push(uiSegmentSrv.newOperator('='));\n          memo.push(uiSegmentSrv.newKeyValue(value));\n          return memo;\n        },\n        [] as any\n      );\n\n      $scope.statSegments = map($scope.target.statistics, (stat) => {\n        return uiSegmentSrv.getSegmentForValue(stat);\n      });\n\n      $scope.ensurePlusButton($scope.statSegments);\n      $scope.ensurePlusButton($scope.dimSegments);\n      $scope.removeDimSegment = uiSegmentSrv.newSegment({\n        fake: true,\n        value: '-- remove dimension --',\n      });\n      $scope.removeStatSegment = uiSegmentSrv.newSegment({\n        fake: true,\n        value: '-- remove stat --',\n      });\n\n      if (isEmpty($scope.target.region)) {\n        $scope.target.region = 'default';\n      }\n\n      if (!$scope.onChange) {\n        $scope.onChange = () => {};\n      }\n    };\n\n    $scope.getStatSegments = () => {\n      return Promise.resolve(\n        flatten([\n          angular.copy($scope.removeStatSegment),\n          map($scope.datasource.standardStatistics, (s) => {\n            return uiSegmentSrv.getSegmentForValue(s);\n          }),\n          uiSegmentSrv.getSegmentForValue('pNN.NN'),\n        ])\n      );\n    };\n\n    $scope.statSegmentChanged = (segment: any, index: number) => {\n      if (segment.value === $scope.removeStatSegment.value) {\n        $scope.statSegments.splice(index, 1);\n      } else {\n        segment.type = 'value';\n      }\n\n      $scope.target.statistics = reduce(\n        $scope.statSegments,\n        (memo, seg) => {\n          if (!seg.fake) {\n            memo.push(seg.value);\n          }\n          return memo;\n        },\n        [] as any\n      );\n\n      $scope.ensurePlusButton($scope.statSegments);\n      $scope.onChange();\n    };\n\n    $scope.ensurePlusButton = (segments: any) => {\n      const count = segments.length;\n      const lastSegment = segments[Math.max(count - 1, 0)];\n\n      if (!lastSegment || lastSegment.type !== 'plus-button') {\n        segments.push(uiSegmentSrv.newPlusButton());\n      }\n    };\n\n    $scope.getDimSegments = (segment: any, $index: number) => {\n      if (segment.type === 'operator') {\n        return Promise.resolve([]);\n      }\n\n      const target = $scope.target;\n      let query = Promise.resolve([] as any[]);\n\n      if (segment.type === 'key' || segment.type === 'plus-button') {\n        query = $scope.datasource.getDimensionKeys($scope.target.namespace, $scope.target.region);\n      } else if (segment.type === 'value') {\n        const dimensionKey = $scope.dimSegments[$index - 2].value;\n        delete target.dimensions[dimensionKey];\n        query = $scope.datasource.getDimensionValues(\n          target.region,\n          target.namespace,\n          target.metricName,\n          dimensionKey,\n          target.dimensions\n        );\n      }\n\n      return query.then($scope.transformToSegments(true)).then((results) => {\n        if (segment.type === 'key') {\n          results.splice(0, 0, angular.copy($scope.removeDimSegment));\n        }\n        return results;\n      });\n    };\n\n    $scope.dimSegmentChanged = (segment: any, index: number) => {\n      $scope.dimSegments[index] = segment;\n\n      if (segment.value === $scope.removeDimSegment.value) {\n        $scope.dimSegments.splice(index, 3);\n      } else if (segment.type === 'plus-button') {\n        $scope.dimSegments.push(uiSegmentSrv.newOperator('='));\n        $scope.dimSegments.push(uiSegmentSrv.newFake('select dimension value', 'value', 'query-segment-value'));\n        segment.type = 'key';\n        segment.cssClass = 'query-segment-key';\n      }\n\n      $scope.syncDimSegmentsWithModel();\n      $scope.ensurePlusButton($scope.dimSegments);\n      $scope.onChange();\n    };\n\n    $scope.syncDimSegmentsWithModel = () => {\n      const dims: any = {};\n      const length = $scope.dimSegments.length;\n\n      for (let i = 0; i < length - 2; i += 3) {\n        const keySegment = $scope.dimSegments[i];\n        const valueSegment = $scope.dimSegments[i + 2];\n        if (!valueSegment.fake) {\n          dims[keySegment.value] = valueSegment.value;\n        }\n      }\n\n      $scope.target.dimensions = dims;\n    };\n\n    $scope.getRegions = () => {\n      return $scope.datasource\n        .metricFindQuery('regions()')\n        .then((results: any) => {\n          results.unshift({ text: 'default' });\n          return results;\n        })\n        .then($scope.transformToSegments(true));\n    };\n\n    $scope.getNamespaces = () => {\n      return $scope.datasource.metricFindQuery('namespaces()').then($scope.transformToSegments(true));\n    };\n\n    $scope.getMetrics = () => {\n      return $scope.datasource\n        .metricFindQuery('metrics(' + $scope.target.namespace + ',' + $scope.target.region + ')')\n        .then($scope.transformToSegments(true));\n    };\n\n    $scope.regionChanged = () => {\n      $scope.target.region = $scope.regionSegment.value;\n      $scope.onChange();\n    };\n\n    $scope.namespaceChanged = () => {\n      $scope.target.namespace = $scope.namespaceSegment.value;\n      $scope.onChange();\n    };\n\n    $scope.metricChanged = () => {\n      $scope.target.metricName = $scope.metricSegment.value;\n      $scope.onChange();\n    };\n\n    $scope.transformToSegments = (addTemplateVars: any) => {\n      return (results: any) => {\n        const segments = map(results, (segment) => {\n          return uiSegmentSrv.newSegment({\n            value: segment.text,\n            expandable: segment.expandable,\n          });\n        });\n\n        if (addTemplateVars) {\n          each(templateSrv.getVariables(), (variable) => {\n            segments.unshift(\n              uiSegmentSrv.newSegment({\n                type: 'template',\n                value: '$' + variable.name,\n                expandable: true,\n              })\n            );\n          });\n        }\n\n        return segments;\n      };\n    };\n\n    $scope.init();\n  }\n}\n\nexport function cloudWatchQueryParameter() {\n  return {\n    templateUrl: 'public/app/plugins/datasource/cloudwatch/partials/query.parameter.html',\n    controller: CloudWatchQueryParameterCtrl,\n    restrict: 'E',\n    scope: {\n      target: '=',\n      datasource: '=',\n      onChange: '&',\n    },\n  };\n}\n\ncoreModule.directive('cloudwatchQueryParameter', cloudWatchQueryParameter);\n","import React, { FunctionComponent } from 'react';\n\nexport interface Props {\n  region: string;\n}\n\nexport const ThrottlingErrorMessage: FunctionComponent<Props> = ({ region }) => (\n  <p>\n    Please visit the&nbsp;\n    <a\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      className=\"text-link\"\n      href={`https://${region}.console.aws.amazon.com/servicequotas/home?region=${region}#!/services/monitoring/quotas/L-5E141212`}\n    >\n      AWS Service Quotas console\n    </a>\n    &nbsp;to request a quota increase or see our&nbsp;\n    <a\n      target=\"_blank\"\n      rel=\"noreferrer\"\n      className=\"text-link\"\n      href=\"https://grafana.com/docs/grafana/latest/datasources/cloudwatch/#service-quotas\"\n    >\n      documentation\n    </a>\n    &nbsp;to learn more.\n  </p>\n);\n","import { debounce, memoize } from 'lodash';\n\nexport default (func: (...args: any[]) => void, wait = 7000) => {\n  const mem = memoize(\n    (...args) =>\n      debounce(func, wait, {\n        leading: true,\n      }),\n    (...args) => JSON.stringify(args)\n  );\n\n  return (...args: any[]) => mem(...args)(...args);\n};\n","import { DataQuery, SelectableValue } from '@grafana/data';\nimport { AwsAuthDataSourceSecureJsonData, AwsAuthDataSourceJsonData } from '@grafana/aws-sdk';\n\nexport interface CloudWatchMetricsQuery extends DataQuery {\n  queryMode?: 'Metrics';\n\n  id: string;\n  region: string;\n  namespace: string;\n  expression: string;\n\n  metricName: string;\n  dimensions: { [key: string]: string | string[] };\n  statistics: string[];\n  period: string;\n  alias: string;\n  matchExact: boolean;\n}\n\nexport type LogAction =\n  | 'DescribeLogGroups'\n  | 'GetQueryResults'\n  | 'GetLogGroupFields'\n  | 'GetLogEvents'\n  | 'StartQuery'\n  | 'StopQuery';\n\nexport enum CloudWatchLogsQueryStatus {\n  Scheduled = 'Scheduled',\n  Running = 'Running',\n  Complete = 'Complete',\n  Failed = 'Failed',\n  Cancelled = 'Cancelled',\n  Timeout = 'Timeout',\n}\n\nexport interface CloudWatchLogsQuery extends DataQuery {\n  queryMode: 'Logs';\n\n  id: string;\n  region: string;\n  expression?: string;\n  logGroupNames?: string[];\n  statsGroups?: string[];\n}\n\nexport type CloudWatchQuery = CloudWatchMetricsQuery | CloudWatchLogsQuery;\n\nexport const isCloudWatchLogsQuery = (cloudwatchQuery: CloudWatchQuery): cloudwatchQuery is CloudWatchLogsQuery =>\n  (cloudwatchQuery as CloudWatchLogsQuery).queryMode === 'Logs';\n\nexport interface AnnotationQuery extends CloudWatchMetricsQuery {\n  prefixMatching: boolean;\n  actionPrefix: string;\n  alarmNamePrefix: string;\n}\n\nexport type SelectableStrings = Array<SelectableValue<string>>;\n\nexport interface CloudWatchJsonData extends AwsAuthDataSourceJsonData {\n  timeField?: string;\n  database?: string;\n  customMetricsNamespaces?: string;\n  endpoint?: string;\n}\n\nexport interface CloudWatchSecureJsonData extends AwsAuthDataSourceSecureJsonData {\n  accessKey: string;\n  secretKey: string;\n}\n\nexport interface GetQueryResultsRequest {\n  /**\n   * The ID number of the query.\n   */\n  queryId: string;\n}\n\nexport interface ResultField {\n  /**\n   * The log event field.\n   */\n  field?: string;\n  /**\n   * The value of this field.\n   */\n  value?: string;\n}\n\nexport interface QueryStatistics {\n  /**\n   * The number of log events that matched the query string.\n   */\n  recordsMatched?: number;\n  /**\n   * The total number of log events scanned during the query.\n   */\n  recordsScanned?: number;\n  /**\n   * The total number of bytes in the log events scanned during the query.\n   */\n  bytesScanned?: number;\n}\n\nexport type QueryStatus = 'Scheduled' | 'Running' | 'Complete' | 'Failed' | 'Cancelled' | string;\n\nexport interface GetLogEventsRequest {\n  /**\n   * The name of the log group.\n   */\n  logGroupName: string;\n  /**\n   * The name of the log stream.\n   */\n  logStreamName: string;\n  /**\n   * The start of the time range, expressed as the number of milliseconds after Jan 1, 1970 00:00:00 UTC. Events with a timestamp equal to this time or later than this time are included. Events with a timestamp earlier than this time are not included.\n   */\n  startTime?: number;\n  /**\n   * The end of the time range, expressed as the number of milliseconds after Jan 1, 1970 00:00:00 UTC. Events with a timestamp equal to or later than this time are not included.\n   */\n  endTime?: number;\n  /**\n   * The token for the next set of items to return. (You received this token from a previous call.) Using this token works only when you specify true for startFromHead.\n   */\n  nextToken?: string;\n  /**\n   * The maximum number of log events returned. If you don't specify a value, the maximum is as many log events as can fit in a response size of 1 MB, up to 10,000 log events.\n   */\n  limit?: number;\n  /**\n   * If the value is true, the earliest log events are returned first. If the value is false, the latest log events are returned first. The default value is false. If you are using nextToken in this operation, you must specify true for startFromHead.\n   */\n  startFromHead?: boolean;\n}\n\nexport interface GetQueryResultsResponse {\n  /**\n   * The log events that matched the query criteria during the most recent time it ran. The results value is an array of arrays. Each log event is one object in the top-level array. Each of these log event objects is an array of field/value pairs.\n   */\n  results?: ResultField[][];\n  /**\n   * Includes the number of log events scanned by the query, the number of log events that matched the query criteria, and the total number of bytes in the log events that were scanned.\n   */\n  statistics?: QueryStatistics;\n  /**\n   * The status of the most recent running of the query. Possible values are Cancelled, Complete, Failed, Running, Scheduled, Timeout, and Unknown. Queries time out after 15 minutes of execution. To avoid having your queries time out, reduce the time range being searched, or partition your query into a number of queries.\n   */\n  status?: QueryStatus;\n}\n\nexport interface DescribeLogGroupsRequest {\n  /**\n   * The prefix to match.\n   */\n  logGroupNamePrefix?: string;\n  /**\n   * The token for the next set of items to return. (You received this token from a previous call.)\n   */\n  nextToken?: string;\n  /**\n   * The maximum number of items returned. If you don't specify a value, the default is up to 50 items.\n   */\n  limit?: number;\n  refId?: string;\n  region?: string;\n}\n\nexport interface TSDBResponse<T = any> {\n  results: Record<string, TSDBQueryResult<T>>;\n  message?: string;\n}\n\nexport interface TSDBQueryResult<T = any> {\n  refId: string;\n  series: TSDBTimeSeries[];\n  tables: Array<TSDBTable<T>>;\n\n  error?: string;\n  meta?: any;\n}\n\nexport interface TSDBTable<T = any> {\n  columns: Array<{ text: string }>;\n  rows: T[];\n}\n\nexport interface TSDBTimeSeries {\n  name: string;\n  points: TSDBTimePoint[];\n  tags?: Record<string, string>;\n}\nexport type TSDBTimePoint = [number, number];\n\nexport interface LogGroup {\n  /**\n   * The name of the log group.\n   */\n  logGroupName?: string;\n  /**\n   * The creation time of the log group, expressed as the number of milliseconds after Jan 1, 1970 00:00:00 UTC.\n   */\n  creationTime?: number;\n  retentionInDays?: number;\n  /**\n   * The number of metric filters.\n   */\n  metricFilterCount?: number;\n  /**\n   * The Amazon Resource Name (ARN) of the log group.\n   */\n  arn?: string;\n  /**\n   * The number of bytes stored.\n   */\n  storedBytes?: number;\n  /**\n   * The Amazon Resource Name (ARN) of the CMK to use when encrypting log data.\n   */\n  kmsKeyId?: string;\n}\n\nexport interface DescribeLogGroupsResponse {\n  /**\n   * The log groups.\n   */\n  logGroups?: LogGroup[];\n  nextToken?: string;\n}\n\nexport interface GetLogGroupFieldsRequest {\n  /**\n   * The name of the log group to search.\n   */\n  logGroupName: string;\n  /**\n   * The time to set as the center of the query. If you specify time, the 8 minutes before and 8 minutes after this time are searched. If you omit time, the past 15 minutes are queried. The time value is specified as epoch time, the number of seconds since January 1, 1970, 00:00:00 UTC.\n   */\n  time?: number;\n}\n\nexport interface LogGroupField {\n  /**\n   * The name of a log field.\n   */\n  name?: string;\n  /**\n   * The percentage of log events queried that contained the field.\n   */\n  percent?: number;\n}\n\nexport interface GetLogGroupFieldsResponse {\n  /**\n   * The array of fields found in the query. Each object in the array contains the name of the field, along with the percentage of time it appeared in the log events that were queried.\n   */\n  logGroupFields?: LogGroupField[];\n}\n\nexport interface StartQueryRequest {\n  /**\n   * The log group on which to perform the query. A StartQuery operation must include a logGroupNames or a logGroupName parameter, but not both.\n   */\n  logGroupName?: string;\n  /**\n   * The list of log groups to be queried. You can include up to 20 log groups. A StartQuery operation must include a logGroupNames or a logGroupName parameter, but not both.\n   */\n  logGroupNames?: string[];\n  /**\n   * The beginning of the time range to query. The range is inclusive, so the specified start time is included in the query. Specified as epoch time, the number of seconds since January 1, 1970, 00:00:00 UTC.\n   */\n  startTime: number;\n  /**\n   * The end of the time range to query. The range is inclusive, so the specified end time is included in the query. Specified as epoch time, the number of seconds since January 1, 1970, 00:00:00 UTC.\n   */\n  endTime: number;\n  /**\n   * The query string to use. For more information, see CloudWatch Logs Insights Query Syntax.\n   */\n  queryString: string;\n  /**\n   * The maximum number of log events to return in the query. If the query string uses the fields command, only the specified fields and their values are returned. The default is 1000.\n   */\n  limit?: number;\n}\nexport interface StartQueryResponse {\n  /**\n   * The unique ID of the query.\n   */\n  queryId?: string;\n}\n\nexport interface MetricRequest {\n  from: string;\n  to: string;\n  queries: MetricQuery[];\n  debug?: boolean;\n}\n\nexport interface MetricQuery {\n  [key: string]: any;\n  datasourceId: number;\n  refId?: string;\n  maxDataPoints?: number;\n  intervalMs?: number;\n}\n\n// interface TsdbQuery {\n// \tTimeRange *TimeRange\n// \tQueries   []*Query\n// \tDebug     bool\n// }\n\n// type Query struct {\n// \tRefId         string\n// \tModel         *simplejson.Json\n// \tDataSource    *models.DataSource\n// \tMaxDataPoints int64\n// \tIntervalMs    int64\n// }\n\nexport interface CloudWatchMetricsAnnotation {\n  namespace: string;\n  metricName: string;\n  expression: string;\n  dimensions: {};\n  region: string;\n  id: string;\n  alias: string;\n  statistics: string[];\n  matchExact: true;\n  prefixMatching: false;\n  actionPrefix: string;\n  alarmNamePrefix: string;\n}\n","// Libraries\nimport { sortedUniq } from 'lodash';\n\n// Services & Utils\nimport syntax, {\n  AGGREGATION_FUNCTIONS_STATS,\n  BOOLEAN_FUNCTIONS,\n  DATETIME_FUNCTIONS,\n  FIELD_AND_FILTER_FUNCTIONS,\n  IP_FUNCTIONS,\n  NUMERIC_OPERATORS,\n  QUERY_COMMANDS,\n  STRING_FUNCTIONS,\n} from './syntax';\n\n// Types\nimport { CloudWatchQuery, TSDBResponse } from './types';\nimport { AbsoluteTimeRange, HistoryItem, LanguageProvider } from '@grafana/data';\n\nimport { CloudWatchDatasource } from './datasource';\nimport { CompletionItemGroup, SearchFunctionType, Token, TypeaheadInput, TypeaheadOutput } from '@grafana/ui';\nimport Prism, { Grammar } from 'prismjs';\n\nexport type CloudWatchHistoryItem = HistoryItem<CloudWatchQuery>;\n\ntype TypeaheadContext = {\n  history?: CloudWatchHistoryItem[];\n  absoluteRange?: AbsoluteTimeRange;\n  logGroupNames?: string[];\n};\n\nexport class CloudWatchLanguageProvider extends LanguageProvider {\n  started = false;\n  declare initialRange: AbsoluteTimeRange;\n  datasource: CloudWatchDatasource;\n\n  constructor(datasource: CloudWatchDatasource, initialValues?: any) {\n    super();\n\n    this.datasource = datasource;\n\n    Object.assign(this, initialValues);\n  }\n\n  // Strip syntax chars\n  cleanText = (s: string) => s.replace(/[()]/g, '').trim();\n\n  getSyntax(): Grammar {\n    return syntax;\n  }\n\n  request = (url: string, params?: any): Promise<TSDBResponse> => {\n    return this.datasource.awsRequest(url, params).toPromise();\n  };\n\n  start = () => {\n    if (!this.startTask) {\n      this.startTask = Promise.resolve().then(() => {\n        this.started = true;\n        return [];\n      });\n    }\n\n    return this.startTask;\n  };\n\n  isStatsQuery(query: string): boolean {\n    const grammar = this.getSyntax();\n    const tokens = Prism.tokenize(query, grammar) ?? [];\n\n    return !!tokens.find(\n      (token) =>\n        typeof token !== 'string' &&\n        token.content.toString().toLowerCase() === 'stats' &&\n        token.type === 'query-command'\n    );\n  }\n\n  /**\n   * Return suggestions based on input that can be then plugged into a typeahead dropdown.\n   * Keep this DOM-free for testing\n   * @param input\n   * @param context Is optional in types but is required in case we are doing getLabelCompletionItems\n   * @param context.absoluteRange Required in case we are doing getLabelCompletionItems\n   * @param context.history Optional used only in getEmptyCompletionItems\n   */\n  async provideCompletionItems(input: TypeaheadInput, context?: TypeaheadContext): Promise<TypeaheadOutput> {\n    const { value } = input;\n\n    // Get tokens\n    const tokens = value?.data.get('tokens');\n\n    if (!tokens || !tokens.length) {\n      return { suggestions: [] };\n    }\n\n    const curToken: Token = tokens.filter(\n      (token: any) =>\n        token.offsets.start <= value!.selection?.start?.offset && token.offsets.end >= value!.selection?.start?.offset\n    )[0];\n\n    const isFirstToken = !curToken.prev;\n    const prevToken = prevNonWhitespaceToken(curToken);\n\n    const isCommandStart = isFirstToken || (!isFirstToken && prevToken?.types.includes('command-separator'));\n    if (isCommandStart) {\n      return this.getCommandCompletionItems();\n    }\n\n    if (isInsideFunctionParenthesis(curToken)) {\n      return await this.getFieldCompletionItems(context?.logGroupNames ?? []);\n    }\n\n    if (isAfterKeyword('by', curToken)) {\n      return this.handleKeyword(context);\n    }\n\n    if (prevToken?.types.includes('comparison-operator')) {\n      return this.handleComparison(context);\n    }\n\n    const commandToken = previousCommandToken(curToken);\n    if (commandToken) {\n      return await this.handleCommand(commandToken, curToken, context);\n    }\n\n    return {\n      suggestions: [],\n    };\n  }\n\n  private fetchedFieldsCache:\n    | {\n        time: number;\n        logGroups: string[];\n        fields: string[];\n      }\n    | undefined;\n\n  private fetchFields = async (logGroups: string[]): Promise<string[]> => {\n    if (\n      this.fetchedFieldsCache &&\n      Date.now() - this.fetchedFieldsCache.time < 30 * 1000 &&\n      sortedUniq(this.fetchedFieldsCache.logGroups).join('|') === sortedUniq(logGroups).join('|')\n    ) {\n      return this.fetchedFieldsCache.fields;\n    }\n\n    const results = await Promise.all(\n      logGroups.map((logGroup) => this.datasource.getLogGroupFields({ logGroupName: logGroup }))\n    );\n\n    const fields = [\n      ...new Set<string>(\n        results.reduce((acc: string[], cur) => acc.concat(cur.logGroupFields?.map((f) => f.name) as string[]), [])\n      ).values(),\n    ];\n\n    this.fetchedFieldsCache = {\n      time: Date.now(),\n      logGroups,\n      fields,\n    };\n\n    return fields;\n  };\n\n  private handleKeyword = async (context?: TypeaheadContext): Promise<TypeaheadOutput> => {\n    const suggs = await this.getFieldCompletionItems(context?.logGroupNames ?? []);\n    const functionSuggestions: CompletionItemGroup[] = [\n      {\n        searchFunctionType: SearchFunctionType.Prefix,\n        label: 'Functions',\n        items: STRING_FUNCTIONS.concat(DATETIME_FUNCTIONS, IP_FUNCTIONS),\n      },\n    ];\n    suggs.suggestions.push(...functionSuggestions);\n\n    return suggs;\n  };\n\n  private handleCommand = async (\n    commandToken: Token,\n    curToken: Token,\n    context?: TypeaheadContext\n  ): Promise<TypeaheadOutput> => {\n    const queryCommand = commandToken.content.toLowerCase();\n    const prevToken = prevNonWhitespaceToken(curToken);\n    const currentTokenIsFirstArg = prevToken === commandToken;\n\n    if (queryCommand === 'sort') {\n      return this.handleSortCommand(currentTokenIsFirstArg, curToken, context);\n    }\n\n    if (queryCommand === 'parse') {\n      if (currentTokenIsFirstArg) {\n        return await this.getFieldCompletionItems(context?.logGroupNames ?? []);\n      }\n    }\n\n    const currentTokenIsAfterCommandAndEmpty = isTokenType(commandToken.next, 'whitespace') && !commandToken.next?.next;\n    const currentTokenIsAfterCommand =\n      currentTokenIsAfterCommandAndEmpty || nextNonWhitespaceToken(commandToken) === curToken;\n\n    const currentTokenIsComma = isTokenType(curToken, 'punctuation', ',');\n    const currentTokenIsCommaOrAfterComma = currentTokenIsComma || isTokenType(prevToken, 'punctuation', ',');\n\n    // We only show suggestions if we are after a command or after a comma which is a field separator\n    if (!(currentTokenIsAfterCommand || currentTokenIsCommaOrAfterComma)) {\n      return { suggestions: [] };\n    }\n\n    if (['display', 'fields'].includes(queryCommand)) {\n      const typeaheadOutput = await this.getFieldCompletionItems(context?.logGroupNames ?? []);\n      typeaheadOutput.suggestions.push(...this.getFieldAndFilterFunctionCompletionItems().suggestions);\n\n      return typeaheadOutput;\n    }\n\n    if (queryCommand === 'stats') {\n      const typeaheadOutput = this.getStatsAggCompletionItems();\n      if (currentTokenIsComma || currentTokenIsAfterCommandAndEmpty) {\n        typeaheadOutput?.suggestions.forEach((group) => {\n          group.skipFilter = true;\n        });\n      }\n      return typeaheadOutput;\n    }\n\n    if (queryCommand === 'filter' && currentTokenIsFirstArg) {\n      const sugg = await this.getFieldCompletionItems(context?.logGroupNames ?? []);\n      const boolFuncs = this.getBoolFuncCompletionItems();\n      sugg.suggestions.push(...boolFuncs.suggestions);\n      return sugg;\n    }\n    return { suggestions: [] };\n  };\n\n  private async handleSortCommand(\n    isFirstArgument: boolean,\n    curToken: Token,\n    context?: TypeaheadContext\n  ): Promise<TypeaheadOutput> {\n    if (isFirstArgument) {\n      return await this.getFieldCompletionItems(context?.logGroupNames ?? []);\n    } else if (isTokenType(prevNonWhitespaceToken(curToken), 'field-name')) {\n      // suggest sort options\n      return {\n        suggestions: [\n          {\n            searchFunctionType: SearchFunctionType.Prefix,\n            label: 'Sort Order',\n            items: [\n              {\n                label: 'asc',\n              },\n              { label: 'desc' },\n            ],\n          },\n        ],\n      };\n    }\n\n    return { suggestions: [] };\n  }\n\n  private handleComparison = async (context?: TypeaheadContext) => {\n    const fieldsSuggestions = await this.getFieldCompletionItems(context?.logGroupNames ?? []);\n    const comparisonSuggestions = this.getComparisonCompletionItems();\n    fieldsSuggestions.suggestions.push(...comparisonSuggestions.suggestions);\n    return fieldsSuggestions;\n  };\n\n  private getCommandCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [{ searchFunctionType: SearchFunctionType.Prefix, label: 'Commands', items: QUERY_COMMANDS }],\n    };\n  };\n\n  private getFieldAndFilterFunctionCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        { searchFunctionType: SearchFunctionType.Prefix, label: 'Functions', items: FIELD_AND_FILTER_FUNCTIONS },\n      ],\n    };\n  };\n\n  private getStatsAggCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        { searchFunctionType: SearchFunctionType.Prefix, label: 'Functions', items: AGGREGATION_FUNCTIONS_STATS },\n      ],\n    };\n  };\n\n  private getBoolFuncCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        {\n          searchFunctionType: SearchFunctionType.Prefix,\n          label: 'Functions',\n          items: BOOLEAN_FUNCTIONS,\n        },\n      ],\n    };\n  };\n\n  private getComparisonCompletionItems = (): TypeaheadOutput => {\n    return {\n      suggestions: [\n        {\n          searchFunctionType: SearchFunctionType.Prefix,\n          label: 'Functions',\n          items: NUMERIC_OPERATORS.concat(BOOLEAN_FUNCTIONS),\n        },\n      ],\n    };\n  };\n\n  private getFieldCompletionItems = async (logGroups: string[]): Promise<TypeaheadOutput> => {\n    const fields = await this.fetchFields(logGroups);\n\n    return {\n      suggestions: [\n        {\n          label: 'Fields',\n          items: fields.map((field) => ({\n            label: field,\n            insertText: field.match(/@?[_a-zA-Z]+[_.0-9a-zA-Z]*/) ? undefined : `\\`${field}\\``,\n          })),\n        },\n      ],\n    };\n  };\n}\n\nfunction nextNonWhitespaceToken(token: Token): Token | null {\n  let curToken = token;\n\n  while (curToken.next) {\n    if (curToken.next.types.includes('whitespace')) {\n      curToken = curToken.next;\n    } else {\n      return curToken.next;\n    }\n  }\n\n  return null;\n}\n\nfunction prevNonWhitespaceToken(token: Token): Token | null {\n  let curToken = token;\n\n  while (curToken.prev) {\n    if (isTokenType(curToken.prev, 'whitespace')) {\n      curToken = curToken.prev;\n    } else {\n      return curToken.prev;\n    }\n  }\n\n  return null;\n}\n\nfunction previousCommandToken(startToken: Token): Token | null {\n  let thisToken = startToken;\n  while (!!thisToken.prev) {\n    thisToken = thisToken.prev;\n    if (\n      thisToken.types.includes('query-command') &&\n      (!thisToken.prev || isTokenType(prevNonWhitespaceToken(thisToken), 'command-separator'))\n    ) {\n      return thisToken;\n    }\n  }\n  return null;\n}\n\nconst funcsWithFieldArgs = [\n  'avg',\n  'count',\n  'count_distinct',\n  'earliest',\n  'latest',\n  'sortsFirst',\n  'sortsLast',\n  'max',\n  'min',\n  'pct',\n  'stddev',\n  'ispresent',\n  'fromMillis',\n  'toMillis',\n  'isempty',\n  'isblank',\n  'isValidIp',\n  'isValidIpV4',\n  'isValidIpV6',\n  'isIpInSubnet',\n  'isIpv4InSubnet',\n  'isIpv6InSubnet',\n].map((funcName) => funcName.toLowerCase());\n\n/**\n * Returns true if cursor is currently inside a function parenthesis for example `count(|)` or `count(@mess|)` should\n * return true.\n */\nfunction isInsideFunctionParenthesis(curToken: Token): boolean {\n  const prevToken = prevNonWhitespaceToken(curToken);\n\n  if (!prevToken) {\n    return false;\n  }\n\n  const parenthesisToken = curToken.content === '(' ? curToken : prevToken.content === '(' ? prevToken : undefined;\n  if (parenthesisToken) {\n    const maybeFunctionToken = prevNonWhitespaceToken(parenthesisToken);\n    if (maybeFunctionToken) {\n      return (\n        funcsWithFieldArgs.includes(maybeFunctionToken.content.toLowerCase()) &&\n        maybeFunctionToken.types.includes('function')\n      );\n    }\n  }\n  return false;\n}\n\nfunction isAfterKeyword(keyword: string, token: Token): boolean {\n  const maybeKeyword = getPreviousTokenExcluding(token, [\n    'whitespace',\n    'function',\n    'punctuation',\n    'field-name',\n    'number',\n  ]);\n  if (isTokenType(maybeKeyword, 'keyword', 'by')) {\n    const prev = getPreviousTokenExcluding(token, ['whitespace']);\n    if (prev === maybeKeyword || isTokenType(prev, 'punctuation', ',')) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isTokenType(token: Token | undefined | null, type: string, content?: string): boolean {\n  if (!token?.types.includes(type)) {\n    return false;\n  }\n  if (content) {\n    if (token?.content.toLowerCase() !== content) {\n      return false;\n    }\n  }\n  return true;\n}\n\ntype TokenDef = string | { type: string; value: string };\nfunction getPreviousTokenExcluding(token: Token, exclude: TokenDef[]): Token | undefined | null {\n  let curToken = token.prev;\n  main: while (curToken) {\n    for (const item of exclude) {\n      if (typeof item === 'string') {\n        if (curToken.types.includes(item)) {\n          curToken = curToken.prev;\n          continue main;\n        }\n      } else {\n        if (curToken.types.includes(item.type) && curToken.content.toLowerCase() === item.value) {\n          curToken = curToken.prev;\n          continue main;\n        }\n      }\n    }\n    break;\n  }\n  return curToken;\n}\n","import { SchedulerLike, Observable, SchedulerAction, Subscriber, asyncScheduler } from 'rxjs';\n\n/**\n * Creates an Observable that emits sequential numbers after increasing intervals of time\n * starting with `startPeriod`, ending with `endPeriod` and incrementing by `step`.\n */\nexport const increasingInterval = (\n  { startPeriod = 0, endPeriod = 5000, step = 1000 },\n  scheduler: SchedulerLike = asyncScheduler\n): Observable<number> => {\n  return new Observable<number>((subscriber) => {\n    subscriber.add(\n      scheduler.schedule(dispatch, startPeriod, { subscriber, counter: 0, period: startPeriod, step, endPeriod })\n    );\n    return subscriber;\n  });\n};\n\nfunction dispatch(this: SchedulerAction<IntervalState>, state: IntervalState) {\n  const { subscriber, counter, period, step, endPeriod } = state;\n  subscriber.next(counter);\n  const newPeriod = Math.min(period + step, endPeriod);\n  this.schedule({ subscriber, counter: counter + 1, period: newPeriod, step, endPeriod }, newPeriod);\n}\n\ninterface IntervalState {\n  subscriber: Subscriber<number>;\n  counter: number;\n  period: number;\n  endPeriod: number;\n  step: number;\n}\n","import React from 'react';\nimport angular from 'angular';\nimport { find, isEmpty, isString, set } from 'lodash';\nimport { merge, Observable, of, throwError, zip } from 'rxjs';\nimport {\n  catchError,\n  concatMap,\n  filter,\n  finalize,\n  map,\n  mergeMap,\n  repeat,\n  scan,\n  share,\n  takeWhile,\n  tap,\n} from 'rxjs/operators';\nimport { getBackendSrv, getGrafanaLiveSrv, toDataQueryResponse, DataSourceWithBackend } from '@grafana/runtime';\nimport { RowContextOptions } from '@grafana/ui/src/components/Logs/LogRowContextProvider';\nimport {\n  DataFrame,\n  DataQueryErrorType,\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceInstanceSettings,\n  dateMath,\n  LiveChannelEvent,\n  LiveChannelMessageEvent,\n  LiveChannelScope,\n  LoadingState,\n  LogRowModel,\n  rangeUtil,\n  ScopedVars,\n  TableData,\n  TimeRange,\n  toLegacyResponseData,\n} from '@grafana/data';\n\nimport { notifyApp } from 'app/core/actions';\nimport { createErrorNotification } from 'app/core/copy/appNotification';\nimport { AppNotificationTimeout } from 'app/types';\nimport { store } from 'app/store/store';\nimport { getTemplateSrv, TemplateSrv } from 'app/features/templating/template_srv';\nimport { getTimeSrv, TimeSrv } from 'app/features/dashboard/services/TimeSrv';\nimport { ThrottlingErrorMessage } from './components/ThrottlingErrorMessage';\nimport memoizedDebounce from './memoizedDebounce';\nimport {\n  CloudWatchJsonData,\n  CloudWatchLogsQuery,\n  CloudWatchLogsQueryStatus,\n  CloudWatchMetricsQuery,\n  CloudWatchQuery,\n  DescribeLogGroupsRequest,\n  GetLogEventsRequest,\n  GetLogGroupFieldsRequest,\n  GetLogGroupFieldsResponse,\n  isCloudWatchLogsQuery,\n  LogAction,\n  MetricQuery,\n  MetricRequest,\n  TSDBResponse,\n} from './types';\nimport { CloudWatchLanguageProvider } from './language_provider';\nimport { VariableWithMultiSupport } from 'app/features/variables/types';\nimport { AwsUrl, encodeUrl } from './aws_url';\nimport { increasingInterval } from './utils/rxjs/increasingInterval';\nimport { toTestingStatus } from '@grafana/runtime/src/utils/queryResponse';\nimport config from 'app/core/config';\n\nconst DS_QUERY_ENDPOINT = '/api/ds/query';\n\n// Constants also defined in tsdb/cloudwatch/cloudwatch.go\nconst LOG_IDENTIFIER_INTERNAL = '__log__grafana_internal__';\nconst LOGSTREAM_IDENTIFIER_INTERNAL = '__logstream__grafana_internal__';\n\nconst displayAlert = (datasourceName: string, region: string) =>\n  store.dispatch(\n    notifyApp(\n      createErrorNotification(\n        `CloudWatch request limit reached in ${region} for data source ${datasourceName}`,\n        '',\n        React.createElement(ThrottlingErrorMessage, { region }, null)\n      )\n    )\n  );\n\nconst displayCustomError = (title: string, message: string) =>\n  store.dispatch(notifyApp(createErrorNotification(title, message)));\n\nexport const MAX_ATTEMPTS = 5;\n\nexport class CloudWatchDatasource extends DataSourceWithBackend<CloudWatchQuery, CloudWatchJsonData> {\n  proxyUrl: any;\n  defaultRegion: any;\n  datasourceName: string;\n  languageProvider: CloudWatchLanguageProvider;\n\n  type = 'cloudwatch';\n  standardStatistics = ['Average', 'Maximum', 'Minimum', 'Sum', 'SampleCount'];\n  debouncedAlert: (datasourceName: string, region: string) => void = memoizedDebounce(\n    displayAlert,\n    AppNotificationTimeout.Error\n  );\n  debouncedCustomAlert: (title: string, message: string) => void = memoizedDebounce(\n    displayCustomError,\n    AppNotificationTimeout.Error\n  );\n  logQueries: Record<string, { id: string; region: string; statsQuery: boolean }> = {};\n\n  constructor(\n    instanceSettings: DataSourceInstanceSettings<CloudWatchJsonData>,\n    private readonly templateSrv: TemplateSrv = getTemplateSrv(),\n    private readonly timeSrv: TimeSrv = getTimeSrv()\n  ) {\n    super(instanceSettings);\n    this.proxyUrl = instanceSettings.url;\n    this.defaultRegion = instanceSettings.jsonData.defaultRegion;\n    this.datasourceName = instanceSettings.name;\n\n    this.languageProvider = new CloudWatchLanguageProvider(this);\n  }\n\n  query(options: DataQueryRequest<CloudWatchQuery>): Observable<DataQueryResponse> {\n    options = angular.copy(options);\n\n    let queries = options.targets.filter((item) => item.id !== '' || item.hide !== true);\n    const { logQueries, metricsQueries } = this.getTargetsByQueryMode(queries);\n\n    const dataQueryResponses: Array<Observable<DataQueryResponse>> = [];\n    if (logQueries.length > 0) {\n      if (config.liveEnabled) {\n        dataQueryResponses.push(this.handleLiveLogQueries(logQueries, options));\n      } else {\n        dataQueryResponses.push(this.handleLogQueries(logQueries, options));\n      }\n    }\n\n    if (metricsQueries.length > 0) {\n      dataQueryResponses.push(this.handleMetricQueries(metricsQueries, options));\n    }\n\n    // No valid targets, return the empty result to save a round trip.\n    if (isEmpty(dataQueryResponses)) {\n      return of({\n        data: [],\n        state: LoadingState.Done,\n      });\n    }\n\n    return merge(...dataQueryResponses);\n  }\n\n  handleLiveLogQueries = (\n    logQueries: CloudWatchLogsQuery[],\n    options: DataQueryRequest<CloudWatchQuery>\n  ): Observable<DataQueryResponse> => {\n    const validLogQueries = logQueries.filter((item) => item.logGroupNames?.length);\n    if (logQueries.length > validLogQueries.length) {\n      return of({ data: [], error: { message: 'Log group is required' } });\n    }\n\n    // No valid targets, return the empty result to save a round trip.\n    if (isEmpty(validLogQueries)) {\n      return of({ data: [], state: LoadingState.Done });\n    }\n\n    const queryParams = validLogQueries.map((target: CloudWatchLogsQuery) => ({\n      intervalMs: 1, // dummy\n      maxDataPoints: 1, // dummy\n      datasourceId: this.id,\n      queryString: this.replace(target.expression, options.scopedVars, true),\n      refId: target.refId,\n      logGroupNames: target.logGroupNames?.map((logGroup) =>\n        this.replace(logGroup, options.scopedVars, true, 'log groups')\n      ),\n      statsGroups: target.statsGroups,\n      region: this.getActualRegion(this.replace(target.region, options.scopedVars, true, 'region')),\n      type: 'liveLogAction',\n    }));\n\n    const range = this.timeSrv.timeRange();\n\n    const requestParams = {\n      from: range.from.valueOf().toString(),\n      to: range.to.valueOf().toString(),\n      queries: queryParams,\n    };\n\n    return this.awsRequest(DS_QUERY_ENDPOINT, requestParams).pipe(\n      mergeMap((response: TSDBResponse) => {\n        const dataQueryResponse = toDataQueryResponse({ data: response }, options.targets);\n        const channelName: string = dataQueryResponse.data[0].meta.custom.channelName;\n        return getGrafanaLiveSrv().getStream({\n          scope: LiveChannelScope.Plugin,\n          namespace: 'cloudwatch',\n          path: channelName,\n        });\n      }),\n      filter((e: LiveChannelEvent<any>) => e.type === 'message'),\n      map(({ message }: LiveChannelMessageEvent<TSDBResponse>) => {\n        const dataQueryResponse = toDataQueryResponse({\n          data: message,\n        });\n        dataQueryResponse.state = dataQueryResponse.data.every((dataFrame) =>\n          statusIsTerminated(dataFrame.meta?.custom?.['Status'])\n        )\n          ? LoadingState.Done\n          : LoadingState.Loading;\n        dataQueryResponse.key = message.results[Object.keys(message.results)[0]].refId;\n        return this.addDataLinksToLogsResponse(dataQueryResponse, options);\n      }),\n      catchError((err) => {\n        if (err.data?.error) {\n          throw err.data.error;\n        }\n\n        throw err;\n      })\n    );\n  };\n\n  handleLogQueries = (\n    logQueries: CloudWatchLogsQuery[],\n    options: DataQueryRequest<CloudWatchQuery>\n  ): Observable<DataQueryResponse> => {\n    const validLogQueries = logQueries.filter((item) => item.logGroupNames?.length);\n    if (logQueries.length > validLogQueries.length) {\n      return of({ data: [], error: { message: 'Log group is required' } });\n    }\n\n    // No valid targets, return the empty result to save a round trip.\n    if (isEmpty(validLogQueries)) {\n      return of({ data: [], state: LoadingState.Done });\n    }\n\n    const queryParams = validLogQueries.map((target: CloudWatchLogsQuery) => ({\n      queryString: target.expression,\n      refId: target.refId,\n      logGroupNames: target.logGroupNames,\n      region: this.replace(this.getActualRegion(target.region), options.scopedVars, true, 'region'),\n    }));\n\n    return this.makeLogActionRequest('StartQuery', queryParams, options.scopedVars).pipe(\n      mergeMap((dataFrames) =>\n        this.logsQuery(\n          dataFrames.map((dataFrame) => ({\n            queryId: dataFrame.fields[0].values.get(0),\n            region: dataFrame.meta?.custom?.['Region'] ?? 'default',\n            refId: dataFrame.refId!,\n            statsGroups: (logQueries.find((target) => target.refId === dataFrame.refId)! as CloudWatchLogsQuery)\n              .statsGroups,\n          }))\n        )\n      ),\n      map((response) => this.addDataLinksToLogsResponse(response, options))\n    );\n  };\n\n  handleMetricQueries = (\n    metricQueries: CloudWatchMetricsQuery[],\n    options: DataQueryRequest<CloudWatchQuery>\n  ): Observable<DataQueryResponse> => {\n    const validMetricsQueries = metricQueries\n      .filter(\n        (item) =>\n          (!!item.region && !!item.namespace && !!item.metricName && !isEmpty(item.statistics)) ||\n          item.expression?.length > 0\n      )\n      .map(\n        (item: CloudWatchMetricsQuery): MetricQuery => {\n          item.region = this.replace(this.getActualRegion(item.region), options.scopedVars, true, 'region');\n          item.namespace = this.replace(item.namespace, options.scopedVars, true, 'namespace');\n          item.metricName = this.replace(item.metricName, options.scopedVars, true, 'metric name');\n          item.dimensions = this.convertDimensionFormat(item.dimensions, options.scopedVars);\n          item.statistics = item.statistics.map((stat) => this.replace(stat, options.scopedVars, true, 'statistics'));\n          item.period = String(this.getPeriod(item, options)); // use string format for period in graph query, and alerting\n          item.id = this.templateSrv.replace(item.id, options.scopedVars);\n          item.expression = this.templateSrv.replace(item.expression, options.scopedVars);\n\n          // valid ExtendedStatistics is like p90.00, check the pattern\n          const hasInvalidStatistics = item.statistics.some((s) => {\n            if (s.indexOf('p') === 0) {\n              const matches = /^p\\d{2}(?:\\.\\d{1,2})?$/.exec(s);\n              return !matches || matches[0] !== s;\n            }\n\n            return false;\n          });\n\n          if (hasInvalidStatistics) {\n            throw { message: 'Invalid extended statistics' };\n          }\n\n          return {\n            intervalMs: options.intervalMs,\n            maxDataPoints: options.maxDataPoints,\n            datasourceId: this.id,\n            type: 'timeSeriesQuery',\n            ...item,\n          };\n        }\n      );\n\n    // No valid targets, return the empty result to save a round trip.\n    if (isEmpty(validMetricsQueries)) {\n      return of({ data: [] });\n    }\n\n    const request = {\n      from: options?.range?.from.valueOf().toString(),\n      to: options?.range?.to.valueOf().toString(),\n      queries: validMetricsQueries,\n    };\n\n    return this.performTimeSeriesQuery(request, options.range);\n  };\n\n  logsQuery(\n    queryParams: Array<{\n      queryId: string;\n      refId: string;\n      limit?: number;\n      region: string;\n      statsGroups?: string[];\n    }>\n  ): Observable<DataQueryResponse> {\n    this.logQueries = {};\n    queryParams.forEach((param) => {\n      this.logQueries[param.refId] = {\n        id: param.queryId,\n        region: param.region,\n        statsQuery: (param.statsGroups?.length ?? 0) > 0 ?? false,\n      };\n    });\n\n    const dataFrames = increasingInterval({ startPeriod: 100, endPeriod: 1000, step: 300 }).pipe(\n      concatMap((_) => this.makeLogActionRequest('GetQueryResults', queryParams)),\n      repeat(),\n      share()\n    );\n\n    const consecutiveFailedAttempts = dataFrames.pipe(\n      scan(\n        ({ failures, prevRecordsMatched }, frames) => {\n          failures++;\n          for (const frame of frames) {\n            const recordsMatched = frame.meta?.stats?.find((stat) => stat.displayName === 'Records scanned')?.value!;\n            if (recordsMatched > (prevRecordsMatched[frame.refId!] ?? 0)) {\n              failures = 0;\n            }\n            prevRecordsMatched[frame.refId!] = recordsMatched;\n          }\n\n          return { failures, prevRecordsMatched };\n        },\n        { failures: 0, prevRecordsMatched: {} as Record<string, number> }\n      ),\n      map(({ failures }) => failures),\n      share()\n    );\n\n    const queryResponse: Observable<DataQueryResponse> = zip(dataFrames, consecutiveFailedAttempts).pipe(\n      tap(([dataFrames]) => {\n        for (const frame of dataFrames) {\n          if (\n            [\n              CloudWatchLogsQueryStatus.Complete,\n              CloudWatchLogsQueryStatus.Cancelled,\n              CloudWatchLogsQueryStatus.Failed,\n            ].includes(frame.meta?.custom?.['Status']) &&\n            this.logQueries.hasOwnProperty(frame.refId!)\n          ) {\n            delete this.logQueries[frame.refId!];\n          }\n        }\n      }),\n      map(([dataFrames, failedAttempts]) => {\n        if (failedAttempts >= MAX_ATTEMPTS) {\n          for (const frame of dataFrames) {\n            set(frame, 'meta.custom.Status', CloudWatchLogsQueryStatus.Cancelled);\n          }\n        }\n\n        return {\n          data: dataFrames,\n          key: 'test-key',\n          state: dataFrames.every((dataFrame) =>\n            [\n              CloudWatchLogsQueryStatus.Complete,\n              CloudWatchLogsQueryStatus.Cancelled,\n              CloudWatchLogsQueryStatus.Failed,\n            ].includes(dataFrame.meta?.custom?.['Status'])\n          )\n            ? LoadingState.Done\n            : LoadingState.Loading,\n          error:\n            failedAttempts >= MAX_ATTEMPTS\n              ? {\n                  message: `error: query timed out after ${MAX_ATTEMPTS} attempts`,\n                  type: DataQueryErrorType.Timeout,\n                }\n              : undefined,\n        };\n      }),\n      takeWhile(({ state }) => state !== LoadingState.Error && state !== LoadingState.Done, true)\n    );\n\n    return withTeardown(queryResponse, () => this.stopQueries());\n  }\n\n  private addDataLinksToLogsResponse(response: DataQueryResponse, options: DataQueryRequest<CloudWatchQuery>) {\n    for (const dataFrame of response.data as DataFrame[]) {\n      const range = this.timeSrv.timeRange();\n      const start = range.from.toISOString();\n      const end = range.to.toISOString();\n\n      const curTarget = options.targets.find((target) => target.refId === dataFrame.refId) as CloudWatchLogsQuery;\n      const interpolatedGroups =\n        curTarget.logGroupNames?.map((logGroup: string) =>\n          this.replace(logGroup, options.scopedVars, true, 'log groups')\n        ) ?? [];\n      const urlProps: AwsUrl = {\n        end,\n        start,\n        timeType: 'ABSOLUTE',\n        tz: 'UTC',\n        editorString: curTarget.expression ? this.replace(curTarget.expression, options.scopedVars, true) : '',\n        isLiveTail: false,\n        source: interpolatedGroups,\n      };\n\n      const encodedUrl = encodeUrl(\n        urlProps,\n        this.getActualRegion(this.replace(curTarget.region, options.scopedVars, true, 'region'))\n      );\n\n      for (const field of dataFrame.fields) {\n        field.config.links = [\n          {\n            url: encodedUrl,\n            title: 'View in CloudWatch console',\n            targetBlank: true,\n          },\n        ];\n      }\n    }\n\n    return response;\n  }\n\n  stopQueries() {\n    if (Object.keys(this.logQueries).length > 0) {\n      this.makeLogActionRequest(\n        'StopQuery',\n        Object.values(this.logQueries).map((logQuery) => ({ queryId: logQuery.id, region: logQuery.region })),\n        undefined,\n        false\n      ).pipe(\n        finalize(() => {\n          this.logQueries = {};\n        })\n      );\n    }\n  }\n\n  async describeLogGroups(params: DescribeLogGroupsRequest): Promise<string[]> {\n    const dataFrames = await this.makeLogActionRequest('DescribeLogGroups', [params]).toPromise();\n\n    const logGroupNames = dataFrames[0]?.fields[0]?.values.toArray() ?? [];\n    return logGroupNames;\n  }\n\n  async getLogGroupFields(params: GetLogGroupFieldsRequest): Promise<GetLogGroupFieldsResponse> {\n    const dataFrames = await this.makeLogActionRequest('GetLogGroupFields', [params]).toPromise();\n\n    const fieldNames = dataFrames[0].fields[0].values.toArray();\n    const fieldPercentages = dataFrames[0].fields[1].values.toArray();\n    const getLogGroupFieldsResponse = {\n      logGroupFields: fieldNames.map((val, i) => ({ name: val, percent: fieldPercentages[i] })) ?? [],\n    };\n\n    return getLogGroupFieldsResponse;\n  }\n\n  getLogRowContext = async (\n    row: LogRowModel,\n    { limit = 10, direction = 'BACKWARD' }: RowContextOptions = {}\n  ): Promise<{ data: DataFrame[] }> => {\n    let logStreamField = null;\n    let logField = null;\n\n    for (const field of row.dataFrame.fields) {\n      if (field.name === LOGSTREAM_IDENTIFIER_INTERNAL) {\n        logStreamField = field;\n        if (logField !== null) {\n          break;\n        }\n      } else if (field.name === LOG_IDENTIFIER_INTERNAL) {\n        logField = field;\n        if (logStreamField !== null) {\n          break;\n        }\n      }\n    }\n\n    const requestParams: GetLogEventsRequest = {\n      limit,\n      startFromHead: direction !== 'BACKWARD',\n      logGroupName: parseLogGroupName(logField!.values.get(row.rowIndex)),\n      logStreamName: logStreamField!.values.get(row.rowIndex),\n    };\n\n    if (direction === 'BACKWARD') {\n      requestParams.endTime = row.timeEpochMs;\n    } else {\n      requestParams.startTime = row.timeEpochMs;\n    }\n\n    const dataFrames = await this.makeLogActionRequest('GetLogEvents', [requestParams]).toPromise();\n\n    return {\n      data: dataFrames,\n    };\n  };\n\n  getVariables() {\n    return this.templateSrv.getVariables().map((v) => `$${v.name}`);\n  }\n\n  getPeriod(target: CloudWatchMetricsQuery, options: any) {\n    let period = this.templateSrv.replace(target.period, options.scopedVars) as any;\n    if (period && period.toLowerCase() !== 'auto') {\n      if (/^\\d+$/.test(period)) {\n        period = parseInt(period, 10);\n      } else {\n        period = rangeUtil.intervalToSeconds(period);\n      }\n\n      if (period < 1) {\n        period = 1;\n      }\n    }\n\n    return period || '';\n  }\n\n  performTimeSeriesQuery(request: MetricRequest, { from, to }: TimeRange): Observable<any> {\n    return this.awsRequest(DS_QUERY_ENDPOINT, request).pipe(\n      map((res) => {\n        const dataframes: DataFrame[] = toDataQueryResponse({ data: res }).data;\n        if (!dataframes || dataframes.length <= 0) {\n          return { data: [] };\n        }\n\n        return {\n          data: dataframes,\n          error: Object.values(res.results).reduce((acc, curr) => (curr.error ? { message: curr.error } : acc), null),\n        };\n      }),\n      catchError((err) => {\n        if (/^Throttling:.*/.test(err.data.message)) {\n          const failedRedIds = Object.keys(err.data.results);\n          const regionsAffected = Object.values(request.queries).reduce(\n            (res: string[], { refId, region }) =>\n              (refId && !failedRedIds.includes(refId)) || res.includes(region) ? res : [...res, region],\n            []\n          ) as string[];\n\n          regionsAffected.forEach((region) => this.debouncedAlert(this.datasourceName, this.getActualRegion(region)));\n        }\n\n        if (err.data && err.data.message === 'Metric request error' && err.data.error) {\n          err.data.message = err.data.error;\n        }\n\n        return throwError(err);\n      })\n    );\n  }\n\n  transformSuggestDataFromDataframes(suggestData: TSDBResponse): Array<{ text: any; label: any; value: any }> {\n    const frames = toDataQueryResponse({ data: suggestData }).data as DataFrame[];\n    const table = toLegacyResponseData(frames[0]) as TableData;\n\n    return table.rows.map(([text, value]) => ({\n      text,\n      value,\n      label: value,\n    }));\n  }\n\n  doMetricQueryRequest(subtype: string, parameters: any): Promise<Array<{ text: any; label: any; value: any }>> {\n    const range = this.timeSrv.timeRange();\n    return this.awsRequest(DS_QUERY_ENDPOINT, {\n      from: range.from.valueOf().toString(),\n      to: range.to.valueOf().toString(),\n      queries: [\n        {\n          refId: 'metricFindQuery',\n          intervalMs: 1, // dummy\n          maxDataPoints: 1, // dummy\n          datasourceId: this.id,\n          type: 'metricFindQuery',\n          subtype: subtype,\n          ...parameters,\n        },\n      ],\n    })\n      .pipe(\n        map((r) => {\n          return this.transformSuggestDataFromDataframes(r);\n        })\n      )\n      .toPromise();\n  }\n\n  makeLogActionRequest(\n    subtype: LogAction,\n    queryParams: any[],\n    scopedVars?: ScopedVars,\n    makeReplacements = true\n  ): Observable<DataFrame[]> {\n    const range = this.timeSrv.timeRange();\n\n    const requestParams = {\n      from: range.from.valueOf().toString(),\n      to: range.to.valueOf().toString(),\n      queries: queryParams.map((param: any) => ({\n        refId: 'A',\n        intervalMs: 1, // dummy\n        maxDataPoints: 1, // dummy\n        datasourceId: this.id,\n        type: 'logAction',\n        subtype: subtype,\n        ...param,\n      })),\n    };\n\n    if (makeReplacements) {\n      requestParams.queries.forEach((query) => {\n        if (query.hasOwnProperty('queryString')) {\n          query.queryString = this.replace(query.queryString, scopedVars, true);\n        }\n        query.region = this.replace(query.region, scopedVars, true, 'region');\n        query.region = this.getActualRegion(query.region);\n\n        // interpolate log groups\n        if (query.logGroupNames) {\n          query.logGroupNames = query.logGroupNames.map((logGroup: string) =>\n            this.replace(logGroup, scopedVars, true, 'log groups')\n          );\n        }\n      });\n    }\n\n    const resultsToDataFrames = (val: any): DataFrame[] => toDataQueryResponse(val).data || [];\n\n    return this.awsRequest(DS_QUERY_ENDPOINT, requestParams).pipe(\n      map((response) => resultsToDataFrames({ data: response })),\n      catchError((err) => {\n        if (err.data?.error) {\n          throw err.data.error;\n        } else if (err.data?.message) {\n          // In PROD we do not supply .error\n          throw err.data.message;\n        }\n\n        throw err;\n      })\n    );\n  }\n\n  getRegions(): Promise<Array<{ label: string; value: string; text: string }>> {\n    return this.doMetricQueryRequest('regions', null).then((regions: any) => [\n      { label: 'default', value: 'default', text: 'default' },\n      ...regions,\n    ]);\n  }\n\n  getNamespaces() {\n    return this.doMetricQueryRequest('namespaces', null);\n  }\n\n  async getMetrics(namespace: string, region?: string) {\n    if (!namespace) {\n      return [];\n    }\n\n    return this.doMetricQueryRequest('metrics', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      namespace: this.templateSrv.replace(namespace),\n    });\n  }\n\n  async getDimensionKeys(namespace: string, region: string) {\n    if (!namespace) {\n      return [];\n    }\n\n    return this.doMetricQueryRequest('dimension_keys', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      namespace: this.templateSrv.replace(namespace),\n    });\n  }\n\n  async getDimensionValues(\n    region: string,\n    namespace: string,\n    metricName: string,\n    dimensionKey: string,\n    filterDimensions: {}\n  ) {\n    if (!namespace || !metricName) {\n      return [];\n    }\n\n    const values = await this.doMetricQueryRequest('dimension_values', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      namespace: this.templateSrv.replace(namespace),\n      metricName: this.templateSrv.replace(metricName.trim()),\n      dimensionKey: this.templateSrv.replace(dimensionKey),\n      dimensions: this.convertDimensionFormat(filterDimensions, {}),\n    });\n\n    return values;\n  }\n\n  getEbsVolumeIds(region: string, instanceId: string) {\n    return this.doMetricQueryRequest('ebs_volume_ids', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      instanceId: this.templateSrv.replace(instanceId),\n    });\n  }\n\n  getEc2InstanceAttribute(region: string, attributeName: string, filters: any) {\n    return this.doMetricQueryRequest('ec2_instance_attribute', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      attributeName: this.templateSrv.replace(attributeName),\n      filters: filters,\n    });\n  }\n\n  getResourceARNs(region: string, resourceType: string, tags: any) {\n    return this.doMetricQueryRequest('resource_arns', {\n      region: this.templateSrv.replace(this.getActualRegion(region)),\n      resourceType: this.templateSrv.replace(resourceType),\n      tags: tags,\n    });\n  }\n\n  async metricFindQuery(query: string) {\n    let region;\n    let namespace;\n    let metricName;\n    let filterJson;\n\n    const regionQuery = query.match(/^regions\\(\\)/);\n    if (regionQuery) {\n      return this.getRegions();\n    }\n\n    const namespaceQuery = query.match(/^namespaces\\(\\)/);\n    if (namespaceQuery) {\n      return this.getNamespaces();\n    }\n\n    const metricNameQuery = query.match(/^metrics\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/);\n    if (metricNameQuery) {\n      namespace = metricNameQuery[1];\n      region = metricNameQuery[3];\n      return this.getMetrics(namespace, region);\n    }\n\n    const dimensionKeysQuery = query.match(/^dimension_keys\\(([^\\)]+?)(,\\s?([^,]+?))?\\)/);\n    if (dimensionKeysQuery) {\n      namespace = dimensionKeysQuery[1];\n      region = dimensionKeysQuery[3];\n      return this.getDimensionKeys(namespace, region);\n    }\n\n    const dimensionValuesQuery = query.match(\n      /^dimension_values\\(([^,]+?),\\s?([^,]+?),\\s?([^,]+?),\\s?([^,]+?)(,\\s?(.+))?\\)/\n    );\n    if (dimensionValuesQuery) {\n      region = dimensionValuesQuery[1];\n      namespace = dimensionValuesQuery[2];\n      metricName = dimensionValuesQuery[3];\n      const dimensionKey = dimensionValuesQuery[4];\n      filterJson = {};\n      if (dimensionValuesQuery[6]) {\n        filterJson = JSON.parse(this.templateSrv.replace(dimensionValuesQuery[6]));\n      }\n\n      return this.getDimensionValues(region, namespace, metricName, dimensionKey, filterJson);\n    }\n\n    const ebsVolumeIdsQuery = query.match(/^ebs_volume_ids\\(([^,]+?),\\s?([^,]+?)\\)/);\n    if (ebsVolumeIdsQuery) {\n      region = ebsVolumeIdsQuery[1];\n      const instanceId = ebsVolumeIdsQuery[2];\n      return this.getEbsVolumeIds(region, instanceId);\n    }\n\n    const ec2InstanceAttributeQuery = query.match(/^ec2_instance_attribute\\(([^,]+?),\\s?([^,]+?),\\s?(.+?)\\)/);\n    if (ec2InstanceAttributeQuery) {\n      region = ec2InstanceAttributeQuery[1];\n      const targetAttributeName = ec2InstanceAttributeQuery[2];\n      filterJson = JSON.parse(this.templateSrv.replace(ec2InstanceAttributeQuery[3]));\n      return this.getEc2InstanceAttribute(region, targetAttributeName, filterJson);\n    }\n\n    const resourceARNsQuery = query.match(/^resource_arns\\(([^,]+?),\\s?([^,]+?),\\s?(.+?)\\)/);\n    if (resourceARNsQuery) {\n      region = resourceARNsQuery[1];\n      const resourceType = resourceARNsQuery[2];\n      const tagsJSON = JSON.parse(this.templateSrv.replace(resourceARNsQuery[3]));\n      return this.getResourceARNs(region, resourceType, tagsJSON);\n    }\n\n    const statsQuery = query.match(/^statistics\\(\\)/);\n    if (statsQuery) {\n      return this.standardStatistics.map((s: string) => ({ value: s, label: s, text: s }));\n    }\n\n    return Promise.resolve([]);\n  }\n\n  annotationQuery(options: any) {\n    const annotation = options.annotation;\n    const statistics = annotation.statistics.map((s: any) => this.templateSrv.replace(s));\n    const defaultPeriod = annotation.prefixMatching ? '' : '300';\n    let period = annotation.period || defaultPeriod;\n    period = parseInt(period, 10);\n    const parameters = {\n      prefixMatching: annotation.prefixMatching,\n      region: this.templateSrv.replace(this.getActualRegion(annotation.region)),\n      namespace: this.templateSrv.replace(annotation.namespace),\n      metricName: this.templateSrv.replace(annotation.metricName),\n      dimensions: this.convertDimensionFormat(annotation.dimensions, {}),\n      statistics: statistics,\n      period: period,\n      actionPrefix: annotation.actionPrefix || '',\n      alarmNamePrefix: annotation.alarmNamePrefix || '',\n    };\n\n    return this.awsRequest(DS_QUERY_ENDPOINT, {\n      from: options.range.from.valueOf().toString(),\n      to: options.range.to.valueOf().toString(),\n      queries: [\n        {\n          refId: 'annotationQuery',\n          datasourceId: this.id,\n          type: 'annotationQuery',\n          ...parameters,\n        },\n      ],\n    })\n      .pipe(\n        map((r) => {\n          const frames = toDataQueryResponse({ data: r }).data as DataFrame[];\n          const table = toLegacyResponseData(frames[0]) as TableData;\n          return table.rows.map((v) => ({\n            annotation: annotation,\n            time: Date.parse(v[0]),\n            title: v[1],\n            tags: [v[2]],\n            text: v[3],\n          }));\n        })\n      )\n      .toPromise();\n  }\n\n  targetContainsTemplate(target: any) {\n    return (\n      this.templateSrv.variableExists(target.region) ||\n      this.templateSrv.variableExists(target.namespace) ||\n      this.templateSrv.variableExists(target.metricName) ||\n      this.templateSrv.variableExists(target.expression!) ||\n      target.logGroupNames?.some((logGroup: string) => this.templateSrv.variableExists(logGroup)) ||\n      find(target.dimensions, (v, k) => this.templateSrv.variableExists(k) || this.templateSrv.variableExists(v))\n    );\n  }\n\n  async testDatasource() {\n    // use billing metrics for test\n    const region = this.defaultRegion;\n    const namespace = 'AWS/Billing';\n    const metricName = 'EstimatedCharges';\n    const dimensions = {};\n\n    try {\n      await this.getDimensionValues(region, namespace, metricName, 'ServiceName', dimensions);\n      return {\n        status: 'success',\n        message: 'Data source is working',\n      };\n    } catch (error) {\n      return toTestingStatus(error);\n    }\n  }\n\n  awsRequest(url: string, data: MetricRequest): Observable<TSDBResponse> {\n    const options = {\n      method: 'POST',\n      url,\n      data,\n    };\n\n    return getBackendSrv()\n      .fetch<TSDBResponse>(options)\n      .pipe(map((result) => result.data));\n  }\n\n  getDefaultRegion() {\n    return this.defaultRegion;\n  }\n\n  getActualRegion(region?: string) {\n    if (region === 'default' || region === undefined || region === '') {\n      return this.getDefaultRegion();\n    }\n    return region;\n  }\n\n  showContextToggle() {\n    return true;\n  }\n\n  convertToCloudWatchTime(date: any, roundUp: any) {\n    if (isString(date)) {\n      date = dateMath.parse(date, roundUp);\n    }\n    return Math.round(date.valueOf() / 1000);\n  }\n\n  convertDimensionFormat(dimensions: { [key: string]: string | string[] }, scopedVars: ScopedVars) {\n    return Object.entries(dimensions).reduce((result, [key, value]) => {\n      key = this.replace(key, scopedVars, true, 'dimension keys');\n\n      if (Array.isArray(value)) {\n        return { ...result, [key]: value };\n      }\n\n      const valueVar = this.templateSrv\n        .getVariables()\n        .find(({ name }) => name === this.templateSrv.getVariableName(value));\n      if (valueVar) {\n        if (((valueVar as unknown) as VariableWithMultiSupport).multi) {\n          const values = this.templateSrv.replace(value, scopedVars, 'pipe').split('|');\n          return { ...result, [key]: values };\n        }\n        return { ...result, [key]: [this.templateSrv.replace(value, scopedVars)] };\n      }\n\n      return { ...result, [key]: [value] };\n    }, {});\n  }\n\n  replace(\n    target?: string,\n    scopedVars?: ScopedVars,\n    displayErrorIfIsMultiTemplateVariable?: boolean,\n    fieldName?: string\n  ) {\n    if (displayErrorIfIsMultiTemplateVariable && !!target) {\n      const variable = this.templateSrv\n        .getVariables()\n        .find(({ name }) => name === this.templateSrv.getVariableName(target));\n      if (variable && ((variable as unknown) as VariableWithMultiSupport).multi) {\n        this.debouncedCustomAlert(\n          'CloudWatch templating error',\n          `Multi template variables are not supported for ${fieldName || target}`\n        );\n      }\n    }\n\n    return this.templateSrv.replace(target, scopedVars);\n  }\n\n  getQueryDisplayText(query: CloudWatchQuery) {\n    if (query.queryMode === 'Logs') {\n      return query.expression ?? '';\n    } else {\n      return JSON.stringify(query);\n    }\n  }\n\n  getTargetsByQueryMode = (targets: CloudWatchQuery[]) => {\n    const logQueries: CloudWatchLogsQuery[] = [];\n    const metricsQueries: CloudWatchMetricsQuery[] = [];\n\n    targets.forEach((query) => {\n      const mode = query.queryMode ?? 'Metrics';\n      if (mode === 'Logs') {\n        logQueries.push(query as CloudWatchLogsQuery);\n      } else {\n        metricsQueries.push(query as CloudWatchMetricsQuery);\n      }\n    });\n\n    return {\n      logQueries,\n      metricsQueries,\n    };\n  };\n\n  interpolateVariablesInQueries(queries: CloudWatchQuery[], scopedVars: ScopedVars): CloudWatchQuery[] {\n    if (!queries.length) {\n      return queries;\n    }\n\n    return queries.map((query) => ({\n      ...query,\n      region: this.getActualRegion(this.replace(query.region, scopedVars)),\n      expression: this.replace(query.expression, scopedVars),\n\n      ...(!isCloudWatchLogsQuery(query) && this.interpolateMetricsQueryVariables(query, scopedVars)),\n    }));\n  }\n\n  interpolateMetricsQueryVariables(\n    query: CloudWatchMetricsQuery,\n    scopedVars: ScopedVars\n  ): Pick<CloudWatchMetricsQuery, 'alias' | 'metricName' | 'namespace' | 'period' | 'dimensions'> {\n    return {\n      alias: this.replace(query.alias, scopedVars),\n      metricName: this.replace(query.metricName, scopedVars),\n      namespace: this.replace(query.namespace, scopedVars),\n      period: this.replace(query.period, scopedVars),\n      dimensions: Object.entries(query.dimensions).reduce((prev, [key, value]) => {\n        if (Array.isArray(value)) {\n          return { ...prev, [key]: value };\n        }\n\n        return { ...prev, [this.replace(key, scopedVars)]: this.replace(value, scopedVars) };\n      }, {}),\n    };\n  }\n}\n\nfunction withTeardown<T = any>(observable: Observable<T>, onUnsubscribe: () => void): Observable<T> {\n  return new Observable<T>((subscriber) => {\n    const innerSub = observable.subscribe({\n      next: (val) => subscriber.next(val),\n      error: (err) => subscriber.next(err),\n      complete: () => subscriber.complete(),\n    });\n\n    return () => {\n      innerSub.unsubscribe();\n      onUnsubscribe();\n    };\n  });\n}\n\nfunction parseLogGroupName(logIdentifier: string): string {\n  const colonIndex = logIdentifier.lastIndexOf(':');\n  return logIdentifier.substr(colonIndex + 1);\n}\n\nfunction statusIsTerminated(status: string | CloudWatchLogsQueryStatus) {\n  return [\n    CloudWatchLogsQueryStatus.Complete,\n    CloudWatchLogsQueryStatus.Cancelled,\n    CloudWatchLogsQueryStatus.Failed,\n    CloudWatchLogsQueryStatus.Timeout,\n  ].includes(status as CloudWatchLogsQueryStatus);\n}\n","import { defaultsDeep } from 'lodash';\nimport { AnnotationQuery } from './types';\n\nexport class CloudWatchAnnotationsQueryCtrl {\n  static templateUrl = 'partials/annotations.editor.html';\n  declare annotation: any;\n\n  /** @ngInject */\n  constructor($scope: any) {\n    this.annotation = $scope.ctrl.annotation;\n\n    defaultsDeep(this.annotation, {\n      namespace: '',\n      metricName: '',\n      expression: '',\n      dimensions: {},\n      region: 'default',\n      id: '',\n      alias: '',\n      statistics: ['Average'],\n      matchExact: true,\n      prefixMatching: false,\n      actionPrefix: '',\n      alarmNamePrefix: '',\n    });\n\n    this.onChange = this.onChange.bind(this);\n  }\n\n  onChange(query: AnnotationQuery) {\n    Object.assign(this.annotation, query);\n  }\n}\n","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _templateObject = _taggedTemplateLiteral(['', ''], ['', '']);\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @class TemplateTag\n * @classdesc Consumes a pipeline of composable transformer plugins and produces a template tag.\n */\nvar TemplateTag = function () {\n  /**\n   * constructs a template tag\n   * @constructs TemplateTag\n   * @param  {...Object} [...transformers] - an array or arguments list of transformers\n   * @return {Function}                    - a template tag\n   */\n  function TemplateTag() {\n    var _this = this;\n\n    for (var _len = arguments.length, transformers = Array(_len), _key = 0; _key < _len; _key++) {\n      transformers[_key] = arguments[_key];\n    }\n\n    _classCallCheck(this, TemplateTag);\n\n    this.tag = function (strings) {\n      for (var _len2 = arguments.length, expressions = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        expressions[_key2 - 1] = arguments[_key2];\n      }\n\n      if (typeof strings === 'function') {\n        // if the first argument passed is a function, assume it is a template tag and return\n        // an intermediary tag that processes the template using the aforementioned tag, passing the\n        // result to our tag\n        return _this.interimTag.bind(_this, strings);\n      }\n\n      if (typeof strings === 'string') {\n        // if the first argument passed is a string, just transform it\n        return _this.transformEndResult(strings);\n      }\n\n      // else, return a transformed end result of processing the template with our tag\n      strings = strings.map(_this.transformString.bind(_this));\n      return _this.transformEndResult(strings.reduce(_this.processSubstitutions.bind(_this, expressions)));\n    };\n\n    // if first argument is an array, extrude it as a list of transformers\n    if (transformers.length > 0 && Array.isArray(transformers[0])) {\n      transformers = transformers[0];\n    }\n\n    // if any transformers are functions, this means they are not initiated - automatically initiate them\n    this.transformers = transformers.map(function (transformer) {\n      return typeof transformer === 'function' ? transformer() : transformer;\n    });\n\n    // return an ES2015 template tag\n    return this.tag;\n  }\n\n  /**\n   * Applies all transformers to a template literal tagged with this method.\n   * If a function is passed as the first argument, assumes the function is a template tag\n   * and applies it to the template, returning a template tag.\n   * @param  {(Function|String|Array<String>)} strings        - Either a template tag or an array containing template strings separated by identifier\n   * @param  {...*}                            ...expressions - Optional list of substitution values.\n   * @return {(String|Function)}                              - Either an intermediary tag function or the results of processing the template.\n   */\n\n\n  _createClass(TemplateTag, [{\n    key: 'interimTag',\n\n\n    /**\n     * An intermediary template tag that receives a template tag and passes the result of calling the template with the received\n     * template tag to our own template tag.\n     * @param  {Function}        nextTag          - the received template tag\n     * @param  {Array<String>}   template         - the template to process\n     * @param  {...*}            ...substitutions - `substitutions` is an array of all substitutions in the template\n     * @return {*}                                - the final processed value\n     */\n    value: function interimTag(previousTag, template) {\n      for (var _len3 = arguments.length, substitutions = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n        substitutions[_key3 - 2] = arguments[_key3];\n      }\n\n      return this.tag(_templateObject, previousTag.apply(undefined, [template].concat(substitutions)));\n    }\n\n    /**\n     * Performs bulk processing on the tagged template, transforming each substitution and then\n     * concatenating the resulting values into a string.\n     * @param  {Array<*>} substitutions - an array of all remaining substitutions present in this template\n     * @param  {String}   resultSoFar   - this iteration's result string so far\n     * @param  {String}   remainingPart - the template chunk after the current substitution\n     * @return {String}                 - the result of joining this iteration's processed substitution with the result\n     */\n\n  }, {\n    key: 'processSubstitutions',\n    value: function processSubstitutions(substitutions, resultSoFar, remainingPart) {\n      var substitution = this.transformSubstitution(substitutions.shift(), resultSoFar);\n      return ''.concat(resultSoFar, substitution, remainingPart);\n    }\n\n    /**\n     * Iterate through each transformer, applying the transformer's `onString` method to the template\n     * strings before all substitutions are processed.\n     * @param {String}  str - The input string\n     * @return {String}     - The final results of processing each transformer\n     */\n\n  }, {\n    key: 'transformString',\n    value: function transformString(str) {\n      var cb = function cb(res, transform) {\n        return transform.onString ? transform.onString(res) : res;\n      };\n      return this.transformers.reduce(cb, str);\n    }\n\n    /**\n     * When a substitution is encountered, iterates through each transformer and applies the transformer's\n     * `onSubstitution` method to the substitution.\n     * @param  {*}      substitution - The current substitution\n     * @param  {String} resultSoFar  - The result up to and excluding this substitution.\n     * @return {*}                   - The final result of applying all substitution transformations.\n     */\n\n  }, {\n    key: 'transformSubstitution',\n    value: function transformSubstitution(substitution, resultSoFar) {\n      var cb = function cb(res, transform) {\n        return transform.onSubstitution ? transform.onSubstitution(res, resultSoFar) : res;\n      };\n      return this.transformers.reduce(cb, substitution);\n    }\n\n    /**\n     * Iterates through each transformer, applying the transformer's `onEndResult` method to the\n     * template literal after all substitutions have finished processing.\n     * @param  {String} endResult - The processed template, just before it is returned from the tag\n     * @return {String}           - The final results of processing each transformer\n     */\n\n  }, {\n    key: 'transformEndResult',\n    value: function transformEndResult(endResult) {\n      var cb = function cb(res, transform) {\n        return transform.onEndResult ? transform.onEndResult(res) : res;\n      };\n      return this.transformers.reduce(cb, endResult);\n    }\n  }]);\n\n  return TemplateTag;\n}();\n\nexport default TemplateTag;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9UZW1wbGF0ZVRhZy9UZW1wbGF0ZVRhZy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInRyYW5zZm9ybWVycyIsInRhZyIsInN0cmluZ3MiLCJleHByZXNzaW9ucyIsImludGVyaW1UYWciLCJiaW5kIiwidHJhbnNmb3JtRW5kUmVzdWx0IiwibWFwIiwidHJhbnNmb3JtU3RyaW5nIiwicmVkdWNlIiwicHJvY2Vzc1N1YnN0aXR1dGlvbnMiLCJsZW5ndGgiLCJBcnJheSIsImlzQXJyYXkiLCJ0cmFuc2Zvcm1lciIsInByZXZpb3VzVGFnIiwidGVtcGxhdGUiLCJzdWJzdGl0dXRpb25zIiwicmVzdWx0U29GYXIiLCJyZW1haW5pbmdQYXJ0Iiwic3Vic3RpdHV0aW9uIiwidHJhbnNmb3JtU3Vic3RpdHV0aW9uIiwic2hpZnQiLCJjb25jYXQiLCJzdHIiLCJjYiIsInJlcyIsInRyYW5zZm9ybSIsIm9uU3RyaW5nIiwib25TdWJzdGl0dXRpb24iLCJlbmRSZXN1bHQiLCJvbkVuZFJlc3VsdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztJQUlxQkEsVztBQUNuQjs7Ozs7O0FBTUEseUJBQTZCO0FBQUE7O0FBQUEsc0NBQWRDLFlBQWM7QUFBZEEsa0JBQWM7QUFBQTs7QUFBQTs7QUFBQSxTQXVCN0JDLEdBdkI2QixHQXVCdkIsVUFBQ0MsT0FBRCxFQUE2QjtBQUFBLHlDQUFoQkMsV0FBZ0I7QUFBaEJBLG1CQUFnQjtBQUFBOztBQUNqQyxVQUFJLE9BQU9ELE9BQVAsS0FBbUIsVUFBdkIsRUFBbUM7QUFDakM7QUFDQTtBQUNBO0FBQ0EsZUFBTyxNQUFLRSxVQUFMLENBQWdCQyxJQUFoQixRQUEyQkgsT0FBM0IsQ0FBUDtBQUNEOztBQUVELFVBQUksT0FBT0EsT0FBUCxLQUFtQixRQUF2QixFQUFpQztBQUMvQjtBQUNBLGVBQU8sTUFBS0ksa0JBQUwsQ0FBd0JKLE9BQXhCLENBQVA7QUFDRDs7QUFFRDtBQUNBQSxnQkFBVUEsUUFBUUssR0FBUixDQUFZLE1BQUtDLGVBQUwsQ0FBcUJILElBQXJCLE9BQVosQ0FBVjtBQUNBLGFBQU8sTUFBS0Msa0JBQUwsQ0FDTEosUUFBUU8sTUFBUixDQUFlLE1BQUtDLG9CQUFMLENBQTBCTCxJQUExQixRQUFxQ0YsV0FBckMsQ0FBZixDQURLLENBQVA7QUFHRCxLQXpDNEI7O0FBQzNCO0FBQ0EsUUFBSUgsYUFBYVcsTUFBYixHQUFzQixDQUF0QixJQUEyQkMsTUFBTUMsT0FBTixDQUFjYixhQUFhLENBQWIsQ0FBZCxDQUEvQixFQUErRDtBQUM3REEscUJBQWVBLGFBQWEsQ0FBYixDQUFmO0FBQ0Q7O0FBRUQ7QUFDQSxTQUFLQSxZQUFMLEdBQW9CQSxhQUFhTyxHQUFiLENBQWlCLHVCQUFlO0FBQ2xELGFBQU8sT0FBT08sV0FBUCxLQUF1QixVQUF2QixHQUFvQ0EsYUFBcEMsR0FBb0RBLFdBQTNEO0FBQ0QsS0FGbUIsQ0FBcEI7O0FBSUE7QUFDQSxXQUFPLEtBQUtiLEdBQVo7QUFDRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7QUE0QkE7Ozs7Ozs7OytCQVFXYyxXLEVBQWFDLFEsRUFBNEI7QUFBQSx5Q0FBZkMsYUFBZTtBQUFmQSxxQkFBZTtBQUFBOztBQUNsRCxhQUFPLEtBQUtoQixHQUFaLGtCQUFrQmMsOEJBQVlDLFFBQVosU0FBeUJDLGFBQXpCLEVBQWxCO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7O3lDQVFxQkEsYSxFQUFlQyxXLEVBQWFDLGEsRUFBZTtBQUM5RCxVQUFNQyxlQUFlLEtBQUtDLHFCQUFMLENBQ25CSixjQUFjSyxLQUFkLEVBRG1CLEVBRW5CSixXQUZtQixDQUFyQjtBQUlBLGFBQU8sR0FBR0ssTUFBSCxDQUFVTCxXQUFWLEVBQXVCRSxZQUF2QixFQUFxQ0QsYUFBckMsQ0FBUDtBQUNEOztBQUVEOzs7Ozs7Ozs7b0NBTWdCSyxHLEVBQUs7QUFDbkIsVUFBTUMsS0FBSyxTQUFMQSxFQUFLLENBQUNDLEdBQUQsRUFBTUMsU0FBTjtBQUFBLGVBQ1RBLFVBQVVDLFFBQVYsR0FBcUJELFVBQVVDLFFBQVYsQ0FBbUJGLEdBQW5CLENBQXJCLEdBQStDQSxHQUR0QztBQUFBLE9BQVg7QUFFQSxhQUFPLEtBQUsxQixZQUFMLENBQWtCUyxNQUFsQixDQUF5QmdCLEVBQXpCLEVBQTZCRCxHQUE3QixDQUFQO0FBQ0Q7O0FBRUQ7Ozs7Ozs7Ozs7MENBT3NCSixZLEVBQWNGLFcsRUFBYTtBQUMvQyxVQUFNTyxLQUFLLFNBQUxBLEVBQUssQ0FBQ0MsR0FBRCxFQUFNQyxTQUFOO0FBQUEsZUFDVEEsVUFBVUUsY0FBVixHQUNJRixVQUFVRSxjQUFWLENBQXlCSCxHQUF6QixFQUE4QlIsV0FBOUIsQ0FESixHQUVJUSxHQUhLO0FBQUEsT0FBWDtBQUlBLGFBQU8sS0FBSzFCLFlBQUwsQ0FBa0JTLE1BQWxCLENBQXlCZ0IsRUFBekIsRUFBNkJMLFlBQTdCLENBQVA7QUFDRDs7QUFFRDs7Ozs7Ozs7O3VDQU1tQlUsUyxFQUFXO0FBQzVCLFVBQU1MLEtBQUssU0FBTEEsRUFBSyxDQUFDQyxHQUFELEVBQU1DLFNBQU47QUFBQSxlQUNUQSxVQUFVSSxXQUFWLEdBQXdCSixVQUFVSSxXQUFWLENBQXNCTCxHQUF0QixDQUF4QixHQUFxREEsR0FENUM7QUFBQSxPQUFYO0FBRUEsYUFBTyxLQUFLMUIsWUFBTCxDQUFrQlMsTUFBbEIsQ0FBeUJnQixFQUF6QixFQUE2QkssU0FBN0IsQ0FBUDtBQUNEOzs7Ozs7ZUFuSGtCL0IsVyIsImZpbGUiOiJUZW1wbGF0ZVRhZy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGNsYXNzIFRlbXBsYXRlVGFnXG4gKiBAY2xhc3NkZXNjIENvbnN1bWVzIGEgcGlwZWxpbmUgb2YgY29tcG9zYWJsZSB0cmFuc2Zvcm1lciBwbHVnaW5zIGFuZCBwcm9kdWNlcyBhIHRlbXBsYXRlIHRhZy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVtcGxhdGVUYWcge1xuICAvKipcbiAgICogY29uc3RydWN0cyBhIHRlbXBsYXRlIHRhZ1xuICAgKiBAY29uc3RydWN0cyBUZW1wbGF0ZVRhZ1xuICAgKiBAcGFyYW0gIHsuLi5PYmplY3R9IFsuLi50cmFuc2Zvcm1lcnNdIC0gYW4gYXJyYXkgb3IgYXJndW1lbnRzIGxpc3Qgb2YgdHJhbnNmb3JtZXJzXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAgICAgICAgICAgICAgICAgICAgLSBhIHRlbXBsYXRlIHRhZ1xuICAgKi9cbiAgY29uc3RydWN0b3IoLi4udHJhbnNmb3JtZXJzKSB7XG4gICAgLy8gaWYgZmlyc3QgYXJndW1lbnQgaXMgYW4gYXJyYXksIGV4dHJ1ZGUgaXQgYXMgYSBsaXN0IG9mIHRyYW5zZm9ybWVyc1xuICAgIGlmICh0cmFuc2Zvcm1lcnMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHRyYW5zZm9ybWVyc1swXSkpIHtcbiAgICAgIHRyYW5zZm9ybWVycyA9IHRyYW5zZm9ybWVyc1swXTtcbiAgICB9XG5cbiAgICAvLyBpZiBhbnkgdHJhbnNmb3JtZXJzIGFyZSBmdW5jdGlvbnMsIHRoaXMgbWVhbnMgdGhleSBhcmUgbm90IGluaXRpYXRlZCAtIGF1dG9tYXRpY2FsbHkgaW5pdGlhdGUgdGhlbVxuICAgIHRoaXMudHJhbnNmb3JtZXJzID0gdHJhbnNmb3JtZXJzLm1hcCh0cmFuc2Zvcm1lciA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHRyYW5zZm9ybWVyID09PSAnZnVuY3Rpb24nID8gdHJhbnNmb3JtZXIoKSA6IHRyYW5zZm9ybWVyO1xuICAgIH0pO1xuXG4gICAgLy8gcmV0dXJuIGFuIEVTMjAxNSB0ZW1wbGF0ZSB0YWdcbiAgICByZXR1cm4gdGhpcy50YWc7XG4gIH1cblxuICAvKipcbiAgICogQXBwbGllcyBhbGwgdHJhbnNmb3JtZXJzIHRvIGEgdGVtcGxhdGUgbGl0ZXJhbCB0YWdnZWQgd2l0aCB0aGlzIG1ldGhvZC5cbiAgICogSWYgYSBmdW5jdGlvbiBpcyBwYXNzZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCBhc3N1bWVzIHRoZSBmdW5jdGlvbiBpcyBhIHRlbXBsYXRlIHRhZ1xuICAgKiBhbmQgYXBwbGllcyBpdCB0byB0aGUgdGVtcGxhdGUsIHJldHVybmluZyBhIHRlbXBsYXRlIHRhZy5cbiAgICogQHBhcmFtICB7KEZ1bmN0aW9ufFN0cmluZ3xBcnJheTxTdHJpbmc+KX0gc3RyaW5ncyAgICAgICAgLSBFaXRoZXIgYSB0ZW1wbGF0ZSB0YWcgb3IgYW4gYXJyYXkgY29udGFpbmluZyB0ZW1wbGF0ZSBzdHJpbmdzIHNlcGFyYXRlZCBieSBpZGVudGlmaWVyXG4gICAqIEBwYXJhbSAgey4uLip9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmV4cHJlc3Npb25zIC0gT3B0aW9uYWwgbGlzdCBvZiBzdWJzdGl0dXRpb24gdmFsdWVzLlxuICAgKiBAcmV0dXJuIHsoU3RyaW5nfEZ1bmN0aW9uKX0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIEVpdGhlciBhbiBpbnRlcm1lZGlhcnkgdGFnIGZ1bmN0aW9uIG9yIHRoZSByZXN1bHRzIG9mIHByb2Nlc3NpbmcgdGhlIHRlbXBsYXRlLlxuICAgKi9cbiAgdGFnID0gKHN0cmluZ3MsIC4uLmV4cHJlc3Npb25zKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBzdHJpbmdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBpZiB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIGlzIGEgZnVuY3Rpb24sIGFzc3VtZSBpdCBpcyBhIHRlbXBsYXRlIHRhZyBhbmQgcmV0dXJuXG4gICAgICAvLyBhbiBpbnRlcm1lZGlhcnkgdGFnIHRoYXQgcHJvY2Vzc2VzIHRoZSB0ZW1wbGF0ZSB1c2luZyB0aGUgYWZvcmVtZW50aW9uZWQgdGFnLCBwYXNzaW5nIHRoZVxuICAgICAgLy8gcmVzdWx0IHRvIG91ciB0YWdcbiAgICAgIHJldHVybiB0aGlzLmludGVyaW1UYWcuYmluZCh0aGlzLCBzdHJpbmdzKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHN0cmluZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBpZiB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIGlzIGEgc3RyaW5nLCBqdXN0IHRyYW5zZm9ybSBpdFxuICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRW5kUmVzdWx0KHN0cmluZ3MpO1xuICAgIH1cblxuICAgIC8vIGVsc2UsIHJldHVybiBhIHRyYW5zZm9ybWVkIGVuZCByZXN1bHQgb2YgcHJvY2Vzc2luZyB0aGUgdGVtcGxhdGUgd2l0aCBvdXIgdGFnXG4gICAgc3RyaW5ncyA9IHN0cmluZ3MubWFwKHRoaXMudHJhbnNmb3JtU3RyaW5nLmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybUVuZFJlc3VsdChcbiAgICAgIHN0cmluZ3MucmVkdWNlKHRoaXMucHJvY2Vzc1N1YnN0aXR1dGlvbnMuYmluZCh0aGlzLCBleHByZXNzaW9ucykpLFxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFuIGludGVybWVkaWFyeSB0ZW1wbGF0ZSB0YWcgdGhhdCByZWNlaXZlcyBhIHRlbXBsYXRlIHRhZyBhbmQgcGFzc2VzIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgdGVtcGxhdGUgd2l0aCB0aGUgcmVjZWl2ZWRcbiAgICogdGVtcGxhdGUgdGFnIHRvIG91ciBvd24gdGVtcGxhdGUgdGFnLlxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gICAgICAgIG5leHRUYWcgICAgICAgICAgLSB0aGUgcmVjZWl2ZWQgdGVtcGxhdGUgdGFnXG4gICAqIEBwYXJhbSAge0FycmF5PFN0cmluZz59ICAgdGVtcGxhdGUgICAgICAgICAtIHRoZSB0ZW1wbGF0ZSB0byBwcm9jZXNzXG4gICAqIEBwYXJhbSAgey4uLip9ICAgICAgICAgICAgLi4uc3Vic3RpdHV0aW9ucyAtIGBzdWJzdGl0dXRpb25zYCBpcyBhbiBhcnJheSBvZiBhbGwgc3Vic3RpdHV0aW9ucyBpbiB0aGUgdGVtcGxhdGVcbiAgICogQHJldHVybiB7Kn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gdGhlIGZpbmFsIHByb2Nlc3NlZCB2YWx1ZVxuICAgKi9cbiAgaW50ZXJpbVRhZyhwcmV2aW91c1RhZywgdGVtcGxhdGUsIC4uLnN1YnN0aXR1dGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy50YWdgJHtwcmV2aW91c1RhZyh0ZW1wbGF0ZSwgLi4uc3Vic3RpdHV0aW9ucyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBidWxrIHByb2Nlc3Npbmcgb24gdGhlIHRhZ2dlZCB0ZW1wbGF0ZSwgdHJhbnNmb3JtaW5nIGVhY2ggc3Vic3RpdHV0aW9uIGFuZCB0aGVuXG4gICAqIGNvbmNhdGVuYXRpbmcgdGhlIHJlc3VsdGluZyB2YWx1ZXMgaW50byBhIHN0cmluZy5cbiAgICogQHBhcmFtICB7QXJyYXk8Kj59IHN1YnN0aXR1dGlvbnMgLSBhbiBhcnJheSBvZiBhbGwgcmVtYWluaW5nIHN1YnN0aXR1dGlvbnMgcHJlc2VudCBpbiB0aGlzIHRlbXBsYXRlXG4gICAqIEBwYXJhbSAge1N0cmluZ30gICByZXN1bHRTb0ZhciAgIC0gdGhpcyBpdGVyYXRpb24ncyByZXN1bHQgc3RyaW5nIHNvIGZhclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICAgcmVtYWluaW5nUGFydCAtIHRoZSB0ZW1wbGF0ZSBjaHVuayBhZnRlciB0aGUgY3VycmVudCBzdWJzdGl0dXRpb25cbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICAgICAgLSB0aGUgcmVzdWx0IG9mIGpvaW5pbmcgdGhpcyBpdGVyYXRpb24ncyBwcm9jZXNzZWQgc3Vic3RpdHV0aW9uIHdpdGggdGhlIHJlc3VsdFxuICAgKi9cbiAgcHJvY2Vzc1N1YnN0aXR1dGlvbnMoc3Vic3RpdHV0aW9ucywgcmVzdWx0U29GYXIsIHJlbWFpbmluZ1BhcnQpIHtcbiAgICBjb25zdCBzdWJzdGl0dXRpb24gPSB0aGlzLnRyYW5zZm9ybVN1YnN0aXR1dGlvbihcbiAgICAgIHN1YnN0aXR1dGlvbnMuc2hpZnQoKSxcbiAgICAgIHJlc3VsdFNvRmFyLFxuICAgICk7XG4gICAgcmV0dXJuICcnLmNvbmNhdChyZXN1bHRTb0Zhciwgc3Vic3RpdHV0aW9uLCByZW1haW5pbmdQYXJ0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlIHRocm91Z2ggZWFjaCB0cmFuc2Zvcm1lciwgYXBwbHlpbmcgdGhlIHRyYW5zZm9ybWVyJ3MgYG9uU3RyaW5nYCBtZXRob2QgdG8gdGhlIHRlbXBsYXRlXG4gICAqIHN0cmluZ3MgYmVmb3JlIGFsbCBzdWJzdGl0dXRpb25zIGFyZSBwcm9jZXNzZWQuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSAgc3RyIC0gVGhlIGlucHV0IHN0cmluZ1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAtIFRoZSBmaW5hbCByZXN1bHRzIG9mIHByb2Nlc3NpbmcgZWFjaCB0cmFuc2Zvcm1lclxuICAgKi9cbiAgdHJhbnNmb3JtU3RyaW5nKHN0cikge1xuICAgIGNvbnN0IGNiID0gKHJlcywgdHJhbnNmb3JtKSA9PlxuICAgICAgdHJhbnNmb3JtLm9uU3RyaW5nID8gdHJhbnNmb3JtLm9uU3RyaW5nKHJlcykgOiByZXM7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtZXJzLnJlZHVjZShjYiwgc3RyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGVuIGEgc3Vic3RpdHV0aW9uIGlzIGVuY291bnRlcmVkLCBpdGVyYXRlcyB0aHJvdWdoIGVhY2ggdHJhbnNmb3JtZXIgYW5kIGFwcGxpZXMgdGhlIHRyYW5zZm9ybWVyJ3NcbiAgICogYG9uU3Vic3RpdHV0aW9uYCBtZXRob2QgdG8gdGhlIHN1YnN0aXR1dGlvbi5cbiAgICogQHBhcmFtICB7Kn0gICAgICBzdWJzdGl0dXRpb24gLSBUaGUgY3VycmVudCBzdWJzdGl0dXRpb25cbiAgICogQHBhcmFtICB7U3RyaW5nfSByZXN1bHRTb0ZhciAgLSBUaGUgcmVzdWx0IHVwIHRvIGFuZCBleGNsdWRpbmcgdGhpcyBzdWJzdGl0dXRpb24uXG4gICAqIEByZXR1cm4geyp9ICAgICAgICAgICAgICAgICAgIC0gVGhlIGZpbmFsIHJlc3VsdCBvZiBhcHBseWluZyBhbGwgc3Vic3RpdHV0aW9uIHRyYW5zZm9ybWF0aW9ucy5cbiAgICovXG4gIHRyYW5zZm9ybVN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgY29uc3QgY2IgPSAocmVzLCB0cmFuc2Zvcm0pID0+XG4gICAgICB0cmFuc2Zvcm0ub25TdWJzdGl0dXRpb25cbiAgICAgICAgPyB0cmFuc2Zvcm0ub25TdWJzdGl0dXRpb24ocmVzLCByZXN1bHRTb0ZhcilcbiAgICAgICAgOiByZXM7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtZXJzLnJlZHVjZShjYiwgc3Vic3RpdHV0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRlcyB0aHJvdWdoIGVhY2ggdHJhbnNmb3JtZXIsIGFwcGx5aW5nIHRoZSB0cmFuc2Zvcm1lcidzIGBvbkVuZFJlc3VsdGAgbWV0aG9kIHRvIHRoZVxuICAgKiB0ZW1wbGF0ZSBsaXRlcmFsIGFmdGVyIGFsbCBzdWJzdGl0dXRpb25zIGhhdmUgZmluaXNoZWQgcHJvY2Vzc2luZy5cbiAgICogQHBhcmFtICB7U3RyaW5nfSBlbmRSZXN1bHQgLSBUaGUgcHJvY2Vzc2VkIHRlbXBsYXRlLCBqdXN0IGJlZm9yZSBpdCBpcyByZXR1cm5lZCBmcm9tIHRoZSB0YWdcbiAgICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgLSBUaGUgZmluYWwgcmVzdWx0cyBvZiBwcm9jZXNzaW5nIGVhY2ggdHJhbnNmb3JtZXJcbiAgICovXG4gIHRyYW5zZm9ybUVuZFJlc3VsdChlbmRSZXN1bHQpIHtcbiAgICBjb25zdCBjYiA9IChyZXMsIHRyYW5zZm9ybSkgPT5cbiAgICAgIHRyYW5zZm9ybS5vbkVuZFJlc3VsdCA/IHRyYW5zZm9ybS5vbkVuZFJlc3VsdChyZXMpIDogcmVzO1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybWVycy5yZWR1Y2UoY2IsIGVuZFJlc3VsdCk7XG4gIH1cbn1cbiJdfQ==","/**\n * TemplateTag transformer that trims whitespace on the end result of a tagged template\n * @param  {String} side = '' - The side of the string to trim. Can be 'start' or 'end' (alternatively 'left' or 'right')\n * @return {Object}           - a TemplateTag transformer\n */\nvar trimResultTransformer = function trimResultTransformer() {\n  var side = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (side === '') {\n        return endResult.trim();\n      }\n\n      side = side.toLowerCase();\n\n      if (side === 'start' || side === 'left') {\n        return endResult.replace(/^\\s*/, '');\n      }\n\n      if (side === 'end' || side === 'right') {\n        return endResult.replace(/\\s*$/, '');\n      }\n\n      throw new Error('Side not supported: ' + side);\n    }\n  };\n};\n\nexport default trimResultTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90cmltUmVzdWx0VHJhbnNmb3JtZXIvdHJpbVJlc3VsdFRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInNpZGUiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJFcnJvciJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FBS0EsSUFBTUEsd0JBQXdCLFNBQXhCQSxxQkFBd0I7QUFBQSxNQUFDQyxJQUFELHVFQUFRLEVBQVI7QUFBQSxTQUFnQjtBQUM1Q0MsZUFENEMsdUJBQ2hDQyxTQURnQyxFQUNyQjtBQUNyQixVQUFJRixTQUFTLEVBQWIsRUFBaUI7QUFDZixlQUFPRSxVQUFVQyxJQUFWLEVBQVA7QUFDRDs7QUFFREgsYUFBT0EsS0FBS0ksV0FBTCxFQUFQOztBQUVBLFVBQUlKLFNBQVMsT0FBVCxJQUFvQkEsU0FBUyxNQUFqQyxFQUF5QztBQUN2QyxlQUFPRSxVQUFVRyxPQUFWLENBQWtCLE1BQWxCLEVBQTBCLEVBQTFCLENBQVA7QUFDRDs7QUFFRCxVQUFJTCxTQUFTLEtBQVQsSUFBa0JBLFNBQVMsT0FBL0IsRUFBd0M7QUFDdEMsZUFBT0UsVUFBVUcsT0FBVixDQUFrQixNQUFsQixFQUEwQixFQUExQixDQUFQO0FBQ0Q7O0FBRUQsWUFBTSxJQUFJQyxLQUFKLDBCQUFpQ04sSUFBakMsQ0FBTjtBQUNEO0FBakIyQyxHQUFoQjtBQUFBLENBQTlCOztBQW9CQSxlQUFlRCxxQkFBZiIsImZpbGUiOiJ0cmltUmVzdWx0VHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyIHRoYXQgdHJpbXMgd2hpdGVzcGFjZSBvbiB0aGUgZW5kIHJlc3VsdCBvZiBhIHRhZ2dlZCB0ZW1wbGF0ZVxuICogQHBhcmFtICB7U3RyaW5nfSBzaWRlID0gJycgLSBUaGUgc2lkZSBvZiB0aGUgc3RyaW5nIHRvIHRyaW0uIENhbiBiZSAnc3RhcnQnIG9yICdlbmQnIChhbHRlcm5hdGl2ZWx5ICdsZWZ0JyBvciAncmlnaHQnKVxuICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciA9IChzaWRlID0gJycpID0+ICh7XG4gIG9uRW5kUmVzdWx0KGVuZFJlc3VsdCkge1xuICAgIGlmIChzaWRlID09PSAnJykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC50cmltKCk7XG4gICAgfVxuXG4gICAgc2lkZSA9IHNpZGUudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChzaWRlID09PSAnc3RhcnQnIHx8IHNpZGUgPT09ICdsZWZ0Jykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9eXFxzKi8sICcnKTtcbiAgICB9XG5cbiAgICBpZiAoc2lkZSA9PT0gJ2VuZCcgfHwgc2lkZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9cXHMqJC8sICcnKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFNpZGUgbm90IHN1cHBvcnRlZDogJHtzaWRlfWApO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lcjtcbiJdfQ==","function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/**\n * strips indentation from a template literal\n * @param  {String} type = 'initial' - whether to remove all indentation or just leading indentation. can be 'all' or 'initial'\n * @return {Object}                  - a TemplateTag transformer\n */\nvar stripIndentTransformer = function stripIndentTransformer() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'initial';\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (type === 'initial') {\n        // remove the shortest leading indentation from each line\n        var match = endResult.match(/^[^\\S\\n]*(?=\\S)/gm);\n        var indent = match && Math.min.apply(Math, _toConsumableArray(match.map(function (el) {\n          return el.length;\n        })));\n        if (indent) {\n          var regexp = new RegExp('^.{' + indent + '}', 'gm');\n          return endResult.replace(regexp, '');\n        }\n        return endResult;\n      }\n      if (type === 'all') {\n        // remove all indentation from each line\n        return endResult.replace(/^[^\\S\\n]+/gm, '');\n      }\n      throw new Error('Unknown type: ' + type);\n    }\n  };\n};\n\nexport default stripIndentTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudFRyYW5zZm9ybWVyL3N0cmlwSW5kZW50VHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsInR5cGUiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsIm1hdGNoIiwiaW5kZW50IiwiTWF0aCIsIm1pbiIsIm1hcCIsImVsIiwibGVuZ3RoIiwicmVnZXhwIiwiUmVnRXhwIiwicmVwbGFjZSIsIkVycm9yIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7OztBQUtBLElBQU1BLHlCQUF5QixTQUF6QkEsc0JBQXlCO0FBQUEsTUFBQ0MsSUFBRCx1RUFBUSxTQUFSO0FBQUEsU0FBdUI7QUFDcERDLGVBRG9ELHVCQUN4Q0MsU0FEd0MsRUFDN0I7QUFDckIsVUFBSUYsU0FBUyxTQUFiLEVBQXdCO0FBQ3RCO0FBQ0EsWUFBTUcsUUFBUUQsVUFBVUMsS0FBVixDQUFnQixtQkFBaEIsQ0FBZDtBQUNBLFlBQU1DLFNBQVNELFNBQVNFLEtBQUtDLEdBQUwsZ0NBQVlILE1BQU1JLEdBQU4sQ0FBVTtBQUFBLGlCQUFNQyxHQUFHQyxNQUFUO0FBQUEsU0FBVixDQUFaLEVBQXhCO0FBQ0EsWUFBSUwsTUFBSixFQUFZO0FBQ1YsY0FBTU0sU0FBUyxJQUFJQyxNQUFKLFNBQWlCUCxNQUFqQixRQUE0QixJQUE1QixDQUFmO0FBQ0EsaUJBQU9GLFVBQVVVLE9BQVYsQ0FBa0JGLE1BQWxCLEVBQTBCLEVBQTFCLENBQVA7QUFDRDtBQUNELGVBQU9SLFNBQVA7QUFDRDtBQUNELFVBQUlGLFNBQVMsS0FBYixFQUFvQjtBQUNsQjtBQUNBLGVBQU9FLFVBQVVVLE9BQVYsQ0FBa0IsYUFBbEIsRUFBaUMsRUFBakMsQ0FBUDtBQUNEO0FBQ0QsWUFBTSxJQUFJQyxLQUFKLG9CQUEyQmIsSUFBM0IsQ0FBTjtBQUNEO0FBakJtRCxHQUF2QjtBQUFBLENBQS9COztBQW9CQSxlQUFlRCxzQkFBZiIsImZpbGUiOiJzdHJpcEluZGVudFRyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBzdHJpcHMgaW5kZW50YXRpb24gZnJvbSBhIHRlbXBsYXRlIGxpdGVyYWxcbiAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSA9ICdpbml0aWFsJyAtIHdoZXRoZXIgdG8gcmVtb3ZlIGFsbCBpbmRlbnRhdGlvbiBvciBqdXN0IGxlYWRpbmcgaW5kZW50YXRpb24uIGNhbiBiZSAnYWxsJyBvciAnaW5pdGlhbCdcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAtIGEgVGVtcGxhdGVUYWcgdHJhbnNmb3JtZXJcbiAqL1xuY29uc3Qgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciA9ICh0eXBlID0gJ2luaXRpYWwnKSA9PiAoe1xuICBvbkVuZFJlc3VsdChlbmRSZXN1bHQpIHtcbiAgICBpZiAodHlwZSA9PT0gJ2luaXRpYWwnKSB7XG4gICAgICAvLyByZW1vdmUgdGhlIHNob3J0ZXN0IGxlYWRpbmcgaW5kZW50YXRpb24gZnJvbSBlYWNoIGxpbmVcbiAgICAgIGNvbnN0IG1hdGNoID0gZW5kUmVzdWx0Lm1hdGNoKC9eW15cXFNcXG5dKig/PVxcUykvZ20pO1xuICAgICAgY29uc3QgaW5kZW50ID0gbWF0Y2ggJiYgTWF0aC5taW4oLi4ubWF0Y2gubWFwKGVsID0+IGVsLmxlbmd0aCkpO1xuICAgICAgaWYgKGluZGVudCkge1xuICAgICAgICBjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKGBeLnske2luZGVudH19YCwgJ2dtJyk7XG4gICAgICAgIHJldHVybiBlbmRSZXN1bHQucmVwbGFjZShyZWdleHAsICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbmRSZXN1bHQ7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnYWxsJykge1xuICAgICAgLy8gcmVtb3ZlIGFsbCBpbmRlbnRhdGlvbiBmcm9tIGVhY2ggbGluZVxuICAgICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKC9eW15cXFNcXG5dKy9nbSwgJycpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gdHlwZTogJHt0eXBlfWApO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHN0cmlwSW5kZW50VHJhbnNmb3JtZXI7XG4iXX0=","/**\n * Replaces tabs, newlines and spaces with the chosen value when they occur in sequences\n * @param  {(String|RegExp)} replaceWhat - the value or pattern that should be replaced\n * @param  {*}               replaceWith - the replacement value\n * @return {Object}                      - a TemplateTag transformer\n */\nvar replaceResultTransformer = function replaceResultTransformer(replaceWhat, replaceWith) {\n  return {\n    onEndResult: function onEndResult(endResult) {\n      if (replaceWhat == null || replaceWith == null) {\n        throw new Error('replaceResultTransformer requires at least 2 arguments.');\n      }\n      return endResult.replace(replaceWhat, replaceWith);\n    }\n  };\n};\n\nexport default replaceResultTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIvcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VXaGF0IiwicmVwbGFjZVdpdGgiLCJvbkVuZFJlc3VsdCIsImVuZFJlc3VsdCIsIkVycm9yIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQU1BLElBQU1BLDJCQUEyQixTQUEzQkEsd0JBQTJCLENBQUNDLFdBQUQsRUFBY0MsV0FBZDtBQUFBLFNBQStCO0FBQzlEQyxlQUQ4RCx1QkFDbERDLFNBRGtELEVBQ3ZDO0FBQ3JCLFVBQUlILGVBQWUsSUFBZixJQUF1QkMsZUFBZSxJQUExQyxFQUFnRDtBQUM5QyxjQUFNLElBQUlHLEtBQUosQ0FDSix5REFESSxDQUFOO0FBR0Q7QUFDRCxhQUFPRCxVQUFVRSxPQUFWLENBQWtCTCxXQUFsQixFQUErQkMsV0FBL0IsQ0FBUDtBQUNEO0FBUjZELEdBQS9CO0FBQUEsQ0FBakM7O0FBV0EsZUFBZUYsd0JBQWYiLCJmaWxlIjoicmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZXBsYWNlcyB0YWJzLCBuZXdsaW5lcyBhbmQgc3BhY2VzIHdpdGggdGhlIGNob3NlbiB2YWx1ZSB3aGVuIHRoZXkgb2NjdXIgaW4gc2VxdWVuY2VzXG4gKiBAcGFyYW0gIHsoU3RyaW5nfFJlZ0V4cCl9IHJlcGxhY2VXaGF0IC0gdGhlIHZhbHVlIG9yIHBhdHRlcm4gdGhhdCBzaG91bGQgYmUgcmVwbGFjZWRcbiAqIEBwYXJhbSAgeyp9ICAgICAgICAgICAgICAgcmVwbGFjZVdpdGggLSB0aGUgcmVwbGFjZW1lbnQgdmFsdWVcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciA9IChyZXBsYWNlV2hhdCwgcmVwbGFjZVdpdGgpID0+ICh7XG4gIG9uRW5kUmVzdWx0KGVuZFJlc3VsdCkge1xuICAgIGlmIChyZXBsYWNlV2hhdCA9PSBudWxsIHx8IHJlcGxhY2VXaXRoID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciByZXF1aXJlcyBhdCBsZWFzdCAyIGFyZ3VtZW50cy4nLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGVuZFJlc3VsdC5yZXBsYWNlKHJlcGxhY2VXaGF0LCByZXBsYWNlV2l0aCk7XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyO1xuIl19","var replaceSubstitutionTransformer = function replaceSubstitutionTransformer(replaceWhat, replaceWith) {\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      if (replaceWhat == null || replaceWith == null) {\n        throw new Error('replaceSubstitutionTransformer requires at least 2 arguments.');\n      }\n\n      // Do not touch if null or undefined\n      if (substitution == null) {\n        return substitution;\n      } else {\n        return substitution.toString().replace(replaceWhat, replaceWith);\n      }\n    }\n  };\n};\n\nexport default replaceSubstitutionTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIvcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyLmpzIl0sIm5hbWVzIjpbInJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lciIsInJlcGxhY2VXaGF0IiwicmVwbGFjZVdpdGgiLCJvblN1YnN0aXR1dGlvbiIsInN1YnN0aXR1dGlvbiIsInJlc3VsdFNvRmFyIiwiRXJyb3IiLCJ0b1N0cmluZyIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUFBLElBQU1BLGlDQUFpQyxTQUFqQ0EsOEJBQWlDLENBQUNDLFdBQUQsRUFBY0MsV0FBZDtBQUFBLFNBQStCO0FBQ3BFQyxrQkFEb0UsMEJBQ3JEQyxZQURxRCxFQUN2Q0MsV0FEdUMsRUFDMUI7QUFDeEMsVUFBSUosZUFBZSxJQUFmLElBQXVCQyxlQUFlLElBQTFDLEVBQWdEO0FBQzlDLGNBQU0sSUFBSUksS0FBSixDQUNKLCtEQURJLENBQU47QUFHRDs7QUFFRDtBQUNBLFVBQUlGLGdCQUFnQixJQUFwQixFQUEwQjtBQUN4QixlQUFPQSxZQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsZUFBT0EsYUFBYUcsUUFBYixHQUF3QkMsT0FBeEIsQ0FBZ0NQLFdBQWhDLEVBQTZDQyxXQUE3QyxDQUFQO0FBQ0Q7QUFDRjtBQWRtRSxHQUEvQjtBQUFBLENBQXZDOztBQWlCQSxlQUFlRiw4QkFBZiIsImZpbGUiOiJyZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIgPSAocmVwbGFjZVdoYXQsIHJlcGxhY2VXaXRoKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgaWYgKHJlcGxhY2VXaGF0ID09IG51bGwgfHwgcmVwbGFjZVdpdGggPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAncmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyIHJlcXVpcmVzIGF0IGxlYXN0IDIgYXJndW1lbnRzLicsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIERvIG5vdCB0b3VjaCBpZiBudWxsIG9yIHVuZGVmaW5lZFxuICAgIGlmIChzdWJzdGl0dXRpb24gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHN1YnN0aXR1dGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN1YnN0aXR1dGlvbi50b1N0cmluZygpLnJlcGxhY2UocmVwbGFjZVdoYXQsIHJlcGxhY2VXaXRoKTtcbiAgICB9XG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyO1xuIl19","var defaults = {\n  separator: '',\n  conjunction: '',\n  serial: false\n};\n\n/**\n * Converts an array substitution to a string containing a list\n * @param  {String} [opts.separator = ''] - the character that separates each item\n * @param  {String} [opts.conjunction = '']  - replace the last separator with this\n * @param  {Boolean} [opts.serial = false] - include the separator before the conjunction? (Oxford comma use-case)\n *\n * @return {Object}                     - a TemplateTag transformer\n */\nvar inlineArrayTransformer = function inlineArrayTransformer() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaults;\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      // only operate on arrays\n      if (Array.isArray(substitution)) {\n        var arrayLength = substitution.length;\n        var separator = opts.separator;\n        var conjunction = opts.conjunction;\n        var serial = opts.serial;\n        // join each item in the array into a string where each item is separated by separator\n        // be sure to maintain indentation\n        var indent = resultSoFar.match(/(\\n?[^\\S\\n]+)$/);\n        if (indent) {\n          substitution = substitution.join(separator + indent[1]);\n        } else {\n          substitution = substitution.join(separator + ' ');\n        }\n        // if conjunction is set, replace the last separator with conjunction, but only if there is more than one substitution\n        if (conjunction && arrayLength > 1) {\n          var separatorIndex = substitution.lastIndexOf(separator);\n          substitution = substitution.slice(0, separatorIndex) + (serial ? separator : '') + ' ' + conjunction + substitution.slice(separatorIndex + 1);\n        }\n      }\n      return substitution;\n    }\n  };\n};\n\nexport default inlineArrayTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmxpbmVBcnJheVRyYW5zZm9ybWVyL2lubGluZUFycmF5VHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsiZGVmYXVsdHMiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiIsInNlcmlhbCIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJvcHRzIiwib25TdWJzdGl0dXRpb24iLCJzdWJzdGl0dXRpb24iLCJyZXN1bHRTb0ZhciIsIkFycmF5IiwiaXNBcnJheSIsImFycmF5TGVuZ3RoIiwibGVuZ3RoIiwiaW5kZW50IiwibWF0Y2giLCJqb2luIiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsInNsaWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxXQUFXO0FBQ2ZDLGFBQVcsRUFESTtBQUVmQyxlQUFhLEVBRkU7QUFHZkMsVUFBUTtBQUhPLENBQWpCOztBQU1BOzs7Ozs7OztBQVFBLElBQU1DLHlCQUF5QixTQUF6QkEsc0JBQXlCO0FBQUEsTUFBQ0MsSUFBRCx1RUFBUUwsUUFBUjtBQUFBLFNBQXNCO0FBQ25ETSxrQkFEbUQsMEJBQ3BDQyxZQURvQyxFQUN0QkMsV0FEc0IsRUFDVDtBQUN4QztBQUNBLFVBQUlDLE1BQU1DLE9BQU4sQ0FBY0gsWUFBZCxDQUFKLEVBQWlDO0FBQy9CLFlBQU1JLGNBQWNKLGFBQWFLLE1BQWpDO0FBQ0EsWUFBTVgsWUFBWUksS0FBS0osU0FBdkI7QUFDQSxZQUFNQyxjQUFjRyxLQUFLSCxXQUF6QjtBQUNBLFlBQU1DLFNBQVNFLEtBQUtGLE1BQXBCO0FBQ0E7QUFDQTtBQUNBLFlBQU1VLFNBQVNMLFlBQVlNLEtBQVosQ0FBa0IsZ0JBQWxCLENBQWY7QUFDQSxZQUFJRCxNQUFKLEVBQVk7QUFDVk4seUJBQWVBLGFBQWFRLElBQWIsQ0FBa0JkLFlBQVlZLE9BQU8sQ0FBUCxDQUE5QixDQUFmO0FBQ0QsU0FGRCxNQUVPO0FBQ0xOLHlCQUFlQSxhQUFhUSxJQUFiLENBQWtCZCxZQUFZLEdBQTlCLENBQWY7QUFDRDtBQUNEO0FBQ0EsWUFBSUMsZUFBZVMsY0FBYyxDQUFqQyxFQUFvQztBQUNsQyxjQUFNSyxpQkFBaUJULGFBQWFVLFdBQWIsQ0FBeUJoQixTQUF6QixDQUF2QjtBQUNBTSx5QkFDRUEsYUFBYVcsS0FBYixDQUFtQixDQUFuQixFQUFzQkYsY0FBdEIsS0FDQ2IsU0FBU0YsU0FBVCxHQUFxQixFQUR0QixJQUVBLEdBRkEsR0FHQUMsV0FIQSxHQUlBSyxhQUFhVyxLQUFiLENBQW1CRixpQkFBaUIsQ0FBcEMsQ0FMRjtBQU1EO0FBQ0Y7QUFDRCxhQUFPVCxZQUFQO0FBQ0Q7QUE1QmtELEdBQXRCO0FBQUEsQ0FBL0I7O0FBK0JBLGVBQWVILHNCQUFmIiwiZmlsZSI6ImlubGluZUFycmF5VHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkZWZhdWx0cyA9IHtcbiAgc2VwYXJhdG9yOiAnJyxcbiAgY29uanVuY3Rpb246ICcnLFxuICBzZXJpYWw6IGZhbHNlLFxufTtcblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhcnJheSBzdWJzdGl0dXRpb24gdG8gYSBzdHJpbmcgY29udGFpbmluZyBhIGxpc3RcbiAqIEBwYXJhbSAge1N0cmluZ30gW29wdHMuc2VwYXJhdG9yID0gJyddIC0gdGhlIGNoYXJhY3RlciB0aGF0IHNlcGFyYXRlcyBlYWNoIGl0ZW1cbiAqIEBwYXJhbSAge1N0cmluZ30gW29wdHMuY29uanVuY3Rpb24gPSAnJ10gIC0gcmVwbGFjZSB0aGUgbGFzdCBzZXBhcmF0b3Igd2l0aCB0aGlzXG4gKiBAcGFyYW0gIHtCb29sZWFufSBbb3B0cy5zZXJpYWwgPSBmYWxzZV0gLSBpbmNsdWRlIHRoZSBzZXBhcmF0b3IgYmVmb3JlIHRoZSBjb25qdW5jdGlvbj8gKE94Zm9yZCBjb21tYSB1c2UtY2FzZSlcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgLSBhIFRlbXBsYXRlVGFnIHRyYW5zZm9ybWVyXG4gKi9cbmNvbnN0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgPSAob3B0cyA9IGRlZmF1bHRzKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIHJlc3VsdFNvRmFyKSB7XG4gICAgLy8gb25seSBvcGVyYXRlIG9uIGFycmF5c1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN1YnN0aXR1dGlvbikpIHtcbiAgICAgIGNvbnN0IGFycmF5TGVuZ3RoID0gc3Vic3RpdHV0aW9uLmxlbmd0aDtcbiAgICAgIGNvbnN0IHNlcGFyYXRvciA9IG9wdHMuc2VwYXJhdG9yO1xuICAgICAgY29uc3QgY29uanVuY3Rpb24gPSBvcHRzLmNvbmp1bmN0aW9uO1xuICAgICAgY29uc3Qgc2VyaWFsID0gb3B0cy5zZXJpYWw7XG4gICAgICAvLyBqb2luIGVhY2ggaXRlbSBpbiB0aGUgYXJyYXkgaW50byBhIHN0cmluZyB3aGVyZSBlYWNoIGl0ZW0gaXMgc2VwYXJhdGVkIGJ5IHNlcGFyYXRvclxuICAgICAgLy8gYmUgc3VyZSB0byBtYWludGFpbiBpbmRlbnRhdGlvblxuICAgICAgY29uc3QgaW5kZW50ID0gcmVzdWx0U29GYXIubWF0Y2goLyhcXG4/W15cXFNcXG5dKykkLyk7XG4gICAgICBpZiAoaW5kZW50KSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbiA9IHN1YnN0aXR1dGlvbi5qb2luKHNlcGFyYXRvciArIGluZGVudFsxXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJzdGl0dXRpb24gPSBzdWJzdGl0dXRpb24uam9pbihzZXBhcmF0b3IgKyAnICcpO1xuICAgICAgfVxuICAgICAgLy8gaWYgY29uanVuY3Rpb24gaXMgc2V0LCByZXBsYWNlIHRoZSBsYXN0IHNlcGFyYXRvciB3aXRoIGNvbmp1bmN0aW9uLCBidXQgb25seSBpZiB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIHN1YnN0aXR1dGlvblxuICAgICAgaWYgKGNvbmp1bmN0aW9uICYmIGFycmF5TGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCBzZXBhcmF0b3JJbmRleCA9IHN1YnN0aXR1dGlvbi5sYXN0SW5kZXhPZihzZXBhcmF0b3IpO1xuICAgICAgICBzdWJzdGl0dXRpb24gPVxuICAgICAgICAgIHN1YnN0aXR1dGlvbi5zbGljZSgwLCBzZXBhcmF0b3JJbmRleCkgK1xuICAgICAgICAgIChzZXJpYWwgPyBzZXBhcmF0b3IgOiAnJykgK1xuICAgICAgICAgICcgJyArXG4gICAgICAgICAgY29uanVuY3Rpb24gK1xuICAgICAgICAgIHN1YnN0aXR1dGlvbi5zbGljZShzZXBhcmF0b3JJbmRleCArIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3Vic3RpdHV0aW9uO1xuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGlubGluZUFycmF5VHJhbnNmb3JtZXI7XG4iXX0=","var splitStringTransformer = function splitStringTransformer(splitBy) {\n  return {\n    onSubstitution: function onSubstitution(substitution, resultSoFar) {\n      if (splitBy != null && typeof splitBy === 'string') {\n        if (typeof substitution === 'string' && substitution.includes(splitBy)) {\n          substitution = substitution.split(splitBy);\n        }\n      } else {\n        throw new Error('You need to specify a string character to split by.');\n      }\n      return substitution;\n    }\n  };\n};\n\nexport default splitStringTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zcGxpdFN0cmluZ1RyYW5zZm9ybWVyL3NwbGl0U3RyaW5nVHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsic3BsaXRTdHJpbmdUcmFuc2Zvcm1lciIsIm9uU3Vic3RpdHV0aW9uIiwic3Vic3RpdHV0aW9uIiwicmVzdWx0U29GYXIiLCJzcGxpdEJ5IiwiaW5jbHVkZXMiLCJzcGxpdCIsIkVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSx5QkFBeUIsU0FBekJBLHNCQUF5QjtBQUFBLFNBQVk7QUFDekNDLGtCQUR5QywwQkFDMUJDLFlBRDBCLEVBQ1pDLFdBRFksRUFDQztBQUN4QyxVQUFJQyxXQUFXLElBQVgsSUFBbUIsT0FBT0EsT0FBUCxLQUFtQixRQUExQyxFQUFvRDtBQUNsRCxZQUFJLE9BQU9GLFlBQVAsS0FBd0IsUUFBeEIsSUFBb0NBLGFBQWFHLFFBQWIsQ0FBc0JELE9BQXRCLENBQXhDLEVBQXdFO0FBQ3RFRix5QkFBZUEsYUFBYUksS0FBYixDQUFtQkYsT0FBbkIsQ0FBZjtBQUNEO0FBQ0YsT0FKRCxNQUlPO0FBQ0wsY0FBTSxJQUFJRyxLQUFKLENBQVUscURBQVYsQ0FBTjtBQUNEO0FBQ0QsYUFBT0wsWUFBUDtBQUNEO0FBVndDLEdBQVo7QUFBQSxDQUEvQjs7QUFhQSxlQUFlRixzQkFBZiIsImZpbGUiOiJzcGxpdFN0cmluZ1RyYW5zZm9ybWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc3BsaXRTdHJpbmdUcmFuc2Zvcm1lciA9IHNwbGl0QnkgPT4gKHtcbiAgb25TdWJzdGl0dXRpb24oc3Vic3RpdHV0aW9uLCByZXN1bHRTb0Zhcikge1xuICAgIGlmIChzcGxpdEJ5ICE9IG51bGwgJiYgdHlwZW9mIHNwbGl0QnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIHN1YnN0aXR1dGlvbiA9PT0gJ3N0cmluZycgJiYgc3Vic3RpdHV0aW9uLmluY2x1ZGVzKHNwbGl0QnkpKSB7XG4gICAgICAgIHN1YnN0aXR1dGlvbiA9IHN1YnN0aXR1dGlvbi5zcGxpdChzcGxpdEJ5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBzcGVjaWZ5IGEgc3RyaW5nIGNoYXJhY3RlciB0byBzcGxpdCBieS4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1YnN0aXR1dGlvbjtcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyO1xuIl19","var isValidValue = function isValidValue(x) {\n  return x != null && !Number.isNaN(x) && typeof x !== 'boolean';\n};\n\nvar removeNonPrintingValuesTransformer = function removeNonPrintingValuesTransformer() {\n  return {\n    onSubstitution: function onSubstitution(substitution) {\n      if (Array.isArray(substitution)) {\n        return substitution.filter(isValidValue);\n      }\n      if (isValidValue(substitution)) {\n        return substitution;\n      }\n      return '';\n    }\n  };\n};\n\nexport default removeNonPrintingValuesTransformer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyL3JlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIuanMiXSwibmFtZXMiOlsiaXNWYWxpZFZhbHVlIiwieCIsIk51bWJlciIsImlzTmFOIiwicmVtb3ZlTm9uUHJpbnRpbmdWYWx1ZXNUcmFuc2Zvcm1lciIsIm9uU3Vic3RpdHV0aW9uIiwic3Vic3RpdHV0aW9uIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFNQSxlQUFlLFNBQWZBLFlBQWU7QUFBQSxTQUNuQkMsS0FBSyxJQUFMLElBQWEsQ0FBQ0MsT0FBT0MsS0FBUCxDQUFhRixDQUFiLENBQWQsSUFBaUMsT0FBT0EsQ0FBUCxLQUFhLFNBRDNCO0FBQUEsQ0FBckI7O0FBR0EsSUFBTUcscUNBQXFDLFNBQXJDQSxrQ0FBcUM7QUFBQSxTQUFPO0FBQ2hEQyxrQkFEZ0QsMEJBQ2pDQyxZQURpQyxFQUNuQjtBQUMzQixVQUFJQyxNQUFNQyxPQUFOLENBQWNGLFlBQWQsQ0FBSixFQUFpQztBQUMvQixlQUFPQSxhQUFhRyxNQUFiLENBQW9CVCxZQUFwQixDQUFQO0FBQ0Q7QUFDRCxVQUFJQSxhQUFhTSxZQUFiLENBQUosRUFBZ0M7QUFDOUIsZUFBT0EsWUFBUDtBQUNEO0FBQ0QsYUFBTyxFQUFQO0FBQ0Q7QUFUK0MsR0FBUDtBQUFBLENBQTNDOztBQVlBLGVBQWVGLGtDQUFmIiwiZmlsZSI6InJlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpc1ZhbGlkVmFsdWUgPSB4ID0+XG4gIHggIT0gbnVsbCAmJiAhTnVtYmVyLmlzTmFOKHgpICYmIHR5cGVvZiB4ICE9PSAnYm9vbGVhbic7XG5cbmNvbnN0IHJlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXIgPSAoKSA9PiAoe1xuICBvblN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdWJzdGl0dXRpb24pKSB7XG4gICAgICByZXR1cm4gc3Vic3RpdHV0aW9uLmZpbHRlcihpc1ZhbGlkVmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNWYWxpZFZhbHVlKHN1YnN0aXR1dGlvbikpIHtcbiAgICAgIHJldHVybiBzdWJzdGl0dXRpb247XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar stripIndent = new TemplateTag(stripIndentTransformer, trimResultTransformer);\n\nexport default stripIndent;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudC9zdHJpcEluZGVudC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJzdHJpcEluZGVudCJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsY0FBYyxJQUFJSCxXQUFKLENBQ2xCQyxzQkFEa0IsRUFFbEJDLHFCQUZrQixDQUFwQjs7QUFLQSxlQUFlQyxXQUFmIiwiZmlsZSI6InN0cmlwSW5kZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBzdHJpcEluZGVudCA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RyaXBJbmRlbnQ7XG4iXX0=","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaLists = new TemplateTag(inlineArrayTransformer({ separator: ',' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzL2NvbW1hTGlzdHMuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsImNvbW1hTGlzdHMiLCJzZXBhcmF0b3IiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFdBQVAsTUFBd0IsZ0JBQXhCO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0MscUJBQVAsTUFBa0MsMEJBQWxDOztBQUVBLElBQU1DLGFBQWEsSUFBSUosV0FBSixDQUNqQkUsdUJBQXVCLEVBQUVHLFdBQVcsR0FBYixFQUF2QixDQURpQixFQUVqQkosc0JBRmlCLEVBR2pCRSxxQkFIaUIsQ0FBbkI7O0FBTUEsZUFBZUMsVUFBZiIsImZpbGUiOiJjb21tYUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IGNvbW1hTGlzdHMgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIoeyBzZXBhcmF0b3I6ICcsJyB9KSxcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFMaXN0cztcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaListsAnd = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'and' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaListsAnd;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzQW5kL2NvbW1hTGlzdHNBbmQuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsImNvbW1hTGlzdHNBbmQiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZ0JBQWdCLElBQUlKLFdBQUosQ0FDcEJFLHVCQUF1QixFQUFFRyxXQUFXLEdBQWIsRUFBa0JDLGFBQWEsS0FBL0IsRUFBdkIsQ0FEb0IsRUFFcEJMLHNCQUZvQixFQUdwQkUscUJBSG9CLENBQXRCOztBQU1BLGVBQWVDLGFBQWYiLCJmaWxlIjoiY29tbWFMaXN0c0FuZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBjb21tYUxpc3RzQW5kID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyKHsgc2VwYXJhdG9yOiAnLCcsIGNvbmp1bmN0aW9uOiAnYW5kJyB9KSxcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFMaXN0c0FuZDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar commaListsOr = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'or' }), stripIndentTransformer, trimResultTransformer);\n\nexport default commaListsOr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tYUxpc3RzT3IvY29tbWFMaXN0c09yLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJjb21tYUxpc3RzT3IiLCJzZXBhcmF0b3IiLCJjb25qdW5jdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZUFBZSxJQUFJSixXQUFKLENBQ25CRSx1QkFBdUIsRUFBRUcsV0FBVyxHQUFiLEVBQWtCQyxhQUFhLElBQS9CLEVBQXZCLENBRG1CLEVBRW5CTCxzQkFGbUIsRUFHbkJFLHFCQUhtQixDQUFyQjs7QUFNQSxlQUFlQyxZQUFmIiwiZmlsZSI6ImNvbW1hTGlzdHNPci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBjb21tYUxpc3RzT3IgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIoeyBzZXBhcmF0b3I6ICcsJywgY29uanVuY3Rpb246ICdvcicgfSksXG4gIHN0cmlwSW5kZW50VHJhbnNmb3JtZXIsXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbW1hTGlzdHNPcjtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport splitStringTransformer from '../splitStringTransformer';\nimport removeNonPrintingValuesTransformer from '../removeNonPrintingValuesTransformer';\n\nvar html = new TemplateTag(splitStringTransformer('\\n'), removeNonPrintingValuesTransformer, inlineArrayTransformer, stripIndentTransformer, trimResultTransformer);\n\nexport default html;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9odG1sL2h0bWwuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJzdHJpcEluZGVudFRyYW5zZm9ybWVyIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInNwbGl0U3RyaW5nVHJhbnNmb3JtZXIiLCJyZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyIiwiaHRtbCJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxrQ0FBUCxNQUErQyx1Q0FBL0M7O0FBRUEsSUFBTUMsT0FBTyxJQUFJTixXQUFKLENBQ1hJLHVCQUF1QixJQUF2QixDQURXLEVBRVhDLGtDQUZXLEVBR1hILHNCQUhXLEVBSVhELHNCQUpXLEVBS1hFLHFCQUxXLENBQWI7O0FBUUEsZUFBZUcsSUFBZiIsImZpbGUiOiJodG1sLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgc3BsaXRTdHJpbmdUcmFuc2Zvcm1lciBmcm9tICcuLi9zcGxpdFN0cmluZ1RyYW5zZm9ybWVyJztcbmltcG9ydCByZW1vdmVOb25QcmludGluZ1ZhbHVlc1RyYW5zZm9ybWVyIGZyb20gJy4uL3JlbW92ZU5vblByaW50aW5nVmFsdWVzVHJhbnNmb3JtZXInO1xuXG5jb25zdCBodG1sID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyKCdcXG4nKSxcbiAgcmVtb3ZlTm9uUHJpbnRpbmdWYWx1ZXNUcmFuc2Zvcm1lcixcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcixcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgaHRtbDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport splitStringTransformer from '../splitStringTransformer';\nimport replaceSubstitutionTransformer from '../replaceSubstitutionTransformer';\n\nvar safeHtml = new TemplateTag(splitStringTransformer('\\n'), inlineArrayTransformer, stripIndentTransformer, trimResultTransformer, replaceSubstitutionTransformer(/&/g, '&amp;'), replaceSubstitutionTransformer(/</g, '&lt;'), replaceSubstitutionTransformer(/>/g, '&gt;'), replaceSubstitutionTransformer(/\"/g, '&quot;'), replaceSubstitutionTransformer(/'/g, '&#x27;'), replaceSubstitutionTransformer(/`/g, '&#x60;'));\n\nexport default safeHtml;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zYWZlSHRtbC9zYWZlSHRtbC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwic3BsaXRTdHJpbmdUcmFuc2Zvcm1lciIsInJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lciIsInNhZmVIdG1sIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLDhCQUFQLE1BQTJDLG1DQUEzQzs7QUFFQSxJQUFNQyxXQUFXLElBQUlOLFdBQUosQ0FDZkksdUJBQXVCLElBQXZCLENBRGUsRUFFZkYsc0JBRmUsRUFHZkQsc0JBSGUsRUFJZkUscUJBSmUsRUFLZkUsK0JBQStCLElBQS9CLEVBQXFDLE9BQXJDLENBTGUsRUFNZkEsK0JBQStCLElBQS9CLEVBQXFDLE1BQXJDLENBTmUsRUFPZkEsK0JBQStCLElBQS9CLEVBQXFDLE1BQXJDLENBUGUsRUFRZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBUmUsRUFTZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBVGUsRUFVZkEsK0JBQStCLElBQS9CLEVBQXFDLFFBQXJDLENBVmUsQ0FBakI7O0FBYUEsZUFBZUMsUUFBZiIsImZpbGUiOiJzYWZlSHRtbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHNwbGl0U3RyaW5nVHJhbnNmb3JtZXIgZnJvbSAnLi4vc3BsaXRTdHJpbmdUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcic7XG5cbmNvbnN0IHNhZmVIdG1sID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzcGxpdFN0cmluZ1RyYW5zZm9ybWVyKCdcXG4nKSxcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcixcbiAgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lcixcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuICByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIoLyYvZywgJyZhbXA7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvPC9nLCAnJmx0OycpLFxuICByZXBsYWNlU3Vic3RpdHV0aW9uVHJhbnNmb3JtZXIoLz4vZywgJyZndDsnKSxcbiAgcmVwbGFjZVN1YnN0aXR1dGlvblRyYW5zZm9ybWVyKC9cIi9nLCAnJnF1b3Q7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvJy9nLCAnJiN4Mjc7JyksXG4gIHJlcGxhY2VTdWJzdGl0dXRpb25UcmFuc2Zvcm1lcigvYC9nLCAnJiN4NjA7JyksXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBzYWZlSHRtbDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLine = new TemplateTag(replaceResultTransformer(/(?:\\n(?:\\s*))+/g, ' '), trimResultTransformer);\n\nexport default oneLine;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lL29uZUxpbmUuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxVQUFVLElBQUlILFdBQUosQ0FDZEUseUJBQXlCLGlCQUF6QixFQUE0QyxHQUE1QyxDQURjLEVBRWRELHFCQUZjLENBQWhCOztBQUtBLGVBQWVFLE9BQWYiLCJmaWxlIjoib25lTGluZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IG9uZUxpbmUgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcigvKD86XFxuKD86XFxzKikpKy9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lO1xuIl19","import TemplateTag from '../TemplateTag';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineTrim = new TemplateTag(replaceResultTransformer(/(?:\\n\\s*)/g, ''), trimResultTransformer);\n\nexport default oneLineTrim;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lVHJpbS9vbmVMaW5lVHJpbS5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsIm9uZUxpbmVUcmltIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxjQUFjLElBQUlILFdBQUosQ0FDbEJFLHlCQUF5QixZQUF6QixFQUF1QyxFQUF2QyxDQURrQixFQUVsQkQscUJBRmtCLENBQXBCOztBQUtBLGVBQWVFLFdBQWYiLCJmaWxlIjoib25lTGluZVRyaW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVtcGxhdGVUYWcgZnJvbSAnLi4vVGVtcGxhdGVUYWcnO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lVHJpbSA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXG5cXHMqKS9nLCAnJyksXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IG9uZUxpbmVUcmltO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaLists = new TemplateTag(inlineArrayTransformer({ separator: ',' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0cy9vbmVMaW5lQ29tbWFMaXN0cy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lQ29tbWFMaXN0cyIsInNlcGFyYXRvciJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyx3QkFBUCxNQUFxQyw2QkFBckM7O0FBRUEsSUFBTUMsb0JBQW9CLElBQUlKLFdBQUosQ0FDeEJDLHVCQUF1QixFQUFFSSxXQUFXLEdBQWIsRUFBdkIsQ0FEd0IsRUFFeEJGLHlCQUF5QixVQUF6QixFQUFxQyxHQUFyQyxDQUZ3QixFQUd4QkQscUJBSHdCLENBQTFCOztBQU1BLGVBQWVFLGlCQUFmIiwiZmlsZSI6Im9uZUxpbmVDb21tYUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lQ29tbWFMaXN0cyA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcih7IHNlcGFyYXRvcjogJywnIH0pLFxuICByZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIoLyg/OlxccyspL2csICcgJyksXG4gIHRyaW1SZXN1bHRUcmFuc2Zvcm1lcixcbik7XG5cbmV4cG9ydCBkZWZhdWx0IG9uZUxpbmVDb21tYUxpc3RzO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaListsOr = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'or' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaListsOr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0c09yL29uZUxpbmVDb21tYUxpc3RzT3IuanMiXSwibmFtZXMiOlsiVGVtcGxhdGVUYWciLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwicmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIiwib25lTGluZUNvbW1hTGlzdHNPciIsInNlcGFyYXRvciIsImNvbmp1bmN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyxzQkFBc0IsSUFBSUosV0FBSixDQUMxQkMsdUJBQXVCLEVBQUVJLFdBQVcsR0FBYixFQUFrQkMsYUFBYSxJQUEvQixFQUF2QixDQUQwQixFQUUxQkgseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRjBCLEVBRzFCRCxxQkFIMEIsQ0FBNUI7O0FBTUEsZUFBZUUsbUJBQWYiLCJmaWxlIjoib25lTGluZUNvbW1hTGlzdHNPci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgaW5saW5lQXJyYXlUcmFuc2Zvcm1lciBmcm9tICcuLi9pbmxpbmVBcnJheVRyYW5zZm9ybWVyJztcbmltcG9ydCB0cmltUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vdHJpbVJlc3VsdFRyYW5zZm9ybWVyJztcbmltcG9ydCByZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyJztcblxuY29uc3Qgb25lTGluZUNvbW1hTGlzdHNPciA9IG5ldyBUZW1wbGF0ZVRhZyhcbiAgaW5saW5lQXJyYXlUcmFuc2Zvcm1lcih7IHNlcGFyYXRvcjogJywnLCBjb25qdW5jdGlvbjogJ29yJyB9KSxcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXHMrKS9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lQ29tbWFMaXN0c09yO1xuIl19","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineCommaListsAnd = new TemplateTag(inlineArrayTransformer({ separator: ',', conjunction: 'and' }), replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineCommaListsAnd;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lQ29tbWFMaXN0c0FuZC9vbmVMaW5lQ29tbWFMaXN0c0FuZC5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsImlubGluZUFycmF5VHJhbnNmb3JtZXIiLCJ0cmltUmVzdWx0VHJhbnNmb3JtZXIiLCJyZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXIiLCJvbmVMaW5lQ29tbWFMaXN0c0FuZCIsInNlcGFyYXRvciIsImNvbmp1bmN0aW9uIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxXQUFQLE1BQXdCLGdCQUF4QjtBQUNBLE9BQU9DLHNCQUFQLE1BQW1DLDJCQUFuQztBQUNBLE9BQU9DLHFCQUFQLE1BQWtDLDBCQUFsQztBQUNBLE9BQU9DLHdCQUFQLE1BQXFDLDZCQUFyQzs7QUFFQSxJQUFNQyx1QkFBdUIsSUFBSUosV0FBSixDQUMzQkMsdUJBQXVCLEVBQUVJLFdBQVcsR0FBYixFQUFrQkMsYUFBYSxLQUEvQixFQUF2QixDQUQyQixFQUUzQkgseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRjJCLEVBRzNCRCxxQkFIMkIsQ0FBN0I7O0FBTUEsZUFBZUUsb0JBQWYiLCJmaWxlIjoib25lTGluZUNvbW1hTGlzdHNBbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVtcGxhdGVUYWcgZnJvbSAnLi4vVGVtcGxhdGVUYWcnO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5pbXBvcnQgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3JlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IG9uZUxpbmVDb21tYUxpc3RzQW5kID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyKHsgc2VwYXJhdG9yOiAnLCcsIGNvbmp1bmN0aW9uOiAnYW5kJyB9KSxcbiAgcmVwbGFjZVJlc3VsdFRyYW5zZm9ybWVyKC8oPzpcXHMrKS9nLCAnICcpLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBvbmVMaW5lQ29tbWFMaXN0c0FuZDtcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar inlineLists = new TemplateTag(inlineArrayTransformer, stripIndentTransformer, trimResultTransformer);\n\nexport default inlineLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmxpbmVMaXN0cy9pbmxpbmVMaXN0cy5qcyJdLCJuYW1lcyI6WyJUZW1wbGF0ZVRhZyIsInN0cmlwSW5kZW50VHJhbnNmb3JtZXIiLCJpbmxpbmVBcnJheVRyYW5zZm9ybWVyIiwidHJpbVJlc3VsdFRyYW5zZm9ybWVyIiwiaW5saW5lTGlzdHMiXSwibWFwcGluZ3MiOiJBQUFBLE9BQU9BLFdBQVAsTUFBd0IsZ0JBQXhCO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0Msc0JBQVAsTUFBbUMsMkJBQW5DO0FBQ0EsT0FBT0MscUJBQVAsTUFBa0MsMEJBQWxDOztBQUVBLElBQU1DLGNBQWMsSUFBSUosV0FBSixDQUNsQkUsc0JBRGtCLEVBRWxCRCxzQkFGa0IsRUFHbEJFLHFCQUhrQixDQUFwQjs7QUFNQSxlQUFlQyxXQUFmIiwiZmlsZSI6ImlubGluZUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBzdHJpcEluZGVudFRyYW5zZm9ybWVyIGZyb20gJy4uL3N0cmlwSW5kZW50VHJhbnNmb3JtZXInO1xuaW1wb3J0IGlubGluZUFycmF5VHJhbnNmb3JtZXIgZnJvbSAnLi4vaW5saW5lQXJyYXlUcmFuc2Zvcm1lcic7XG5pbXBvcnQgdHJpbVJlc3VsdFRyYW5zZm9ybWVyIGZyb20gJy4uL3RyaW1SZXN1bHRUcmFuc2Zvcm1lcic7XG5cbmNvbnN0IGlubGluZUxpc3RzID0gbmV3IFRlbXBsYXRlVGFnKFxuICBpbmxpbmVBcnJheVRyYW5zZm9ybWVyLFxuICBzdHJpcEluZGVudFRyYW5zZm9ybWVyLFxuICB0cmltUmVzdWx0VHJhbnNmb3JtZXIsXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBpbmxpbmVMaXN0cztcbiJdfQ==","import TemplateTag from '../TemplateTag';\nimport inlineArrayTransformer from '../inlineArrayTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\nimport replaceResultTransformer from '../replaceResultTransformer';\n\nvar oneLineInlineLists = new TemplateTag(inlineArrayTransformer, replaceResultTransformer(/(?:\\s+)/g, ' '), trimResultTransformer);\n\nexport default oneLineInlineLists;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vbmVMaW5lSW5saW5lTGlzdHMvb25lTGluZUlubGluZUxpc3RzLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwiaW5saW5lQXJyYXlUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciIsIm9uZUxpbmVJbmxpbmVMaXN0cyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7QUFDQSxPQUFPQyx3QkFBUCxNQUFxQyw2QkFBckM7O0FBRUEsSUFBTUMscUJBQXFCLElBQUlKLFdBQUosQ0FDekJDLHNCQUR5QixFQUV6QkUseUJBQXlCLFVBQXpCLEVBQXFDLEdBQXJDLENBRnlCLEVBR3pCRCxxQkFIeUIsQ0FBM0I7O0FBTUEsZUFBZUUsa0JBQWYiLCJmaWxlIjoib25lTGluZUlubGluZUxpc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRlbXBsYXRlVGFnIGZyb20gJy4uL1RlbXBsYXRlVGFnJztcbmltcG9ydCBpbmxpbmVBcnJheVRyYW5zZm9ybWVyIGZyb20gJy4uL2lubGluZUFycmF5VHJhbnNmb3JtZXInO1xuaW1wb3J0IHRyaW1SZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi90cmltUmVzdWx0VHJhbnNmb3JtZXInO1xuaW1wb3J0IHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lciBmcm9tICcuLi9yZXBsYWNlUmVzdWx0VHJhbnNmb3JtZXInO1xuXG5jb25zdCBvbmVMaW5lSW5saW5lTGlzdHMgPSBuZXcgVGVtcGxhdGVUYWcoXG4gIGlubGluZUFycmF5VHJhbnNmb3JtZXIsXG4gIHJlcGxhY2VSZXN1bHRUcmFuc2Zvcm1lcigvKD86XFxzKykvZywgJyAnKSxcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgb25lTGluZUlubGluZUxpc3RzO1xuIl19","import TemplateTag from '../TemplateTag';\nimport stripIndentTransformer from '../stripIndentTransformer';\nimport trimResultTransformer from '../trimResultTransformer';\n\nvar stripIndents = new TemplateTag(stripIndentTransformer('all'), trimResultTransformer);\n\nexport default stripIndents;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zdHJpcEluZGVudHMvc3RyaXBJbmRlbnRzLmpzIl0sIm5hbWVzIjpbIlRlbXBsYXRlVGFnIiwic3RyaXBJbmRlbnRUcmFuc2Zvcm1lciIsInRyaW1SZXN1bHRUcmFuc2Zvcm1lciIsInN0cmlwSW5kZW50cyJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsV0FBUCxNQUF3QixnQkFBeEI7QUFDQSxPQUFPQyxzQkFBUCxNQUFtQywyQkFBbkM7QUFDQSxPQUFPQyxxQkFBUCxNQUFrQywwQkFBbEM7O0FBRUEsSUFBTUMsZUFBZSxJQUFJSCxXQUFKLENBQ25CQyx1QkFBdUIsS0FBdkIsQ0FEbUIsRUFFbkJDLHFCQUZtQixDQUFyQjs7QUFLQSxlQUFlQyxZQUFmIiwiZmlsZSI6InN0cmlwSW5kZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZW1wbGF0ZVRhZyBmcm9tICcuLi9UZW1wbGF0ZVRhZyc7XG5pbXBvcnQgc3RyaXBJbmRlbnRUcmFuc2Zvcm1lciBmcm9tICcuLi9zdHJpcEluZGVudFRyYW5zZm9ybWVyJztcbmltcG9ydCB0cmltUmVzdWx0VHJhbnNmb3JtZXIgZnJvbSAnLi4vdHJpbVJlc3VsdFRyYW5zZm9ybWVyJztcblxuY29uc3Qgc3RyaXBJbmRlbnRzID0gbmV3IFRlbXBsYXRlVGFnKFxuICBzdHJpcEluZGVudFRyYW5zZm9ybWVyKCdhbGwnKSxcbiAgdHJpbVJlc3VsdFRyYW5zZm9ybWVyLFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgc3RyaXBJbmRlbnRzO1xuIl19","import React, { PureComponent } from 'react';\nimport { stripIndent, stripIndents } from 'common-tags';\nimport { QueryEditorHelpProps } from '@grafana/data';\nimport Prism from 'prismjs';\nimport tokenizer from '../syntax';\nimport { flattenTokens } from '@grafana/ui/src/slate-plugins/slate-prism';\nimport { css, cx } from '@emotion/css';\nimport { CloudWatchQuery } from '../types';\n\ninterface QueryExample {\n  category: string;\n  examples: Array<{\n    title: string;\n    expr: string;\n  }>;\n}\n\nconst CLIQ_EXAMPLES: QueryExample[] = [\n  {\n    category: 'Lambda',\n    examples: [\n      {\n        title: 'View latency statistics for 5-minute intervals',\n        expr: stripIndents`filter @type = \"REPORT\" |\n                           stats avg(@duration), max(@duration), min(@duration) by bin(5m)`,\n      },\n      {\n        title: 'Determine the amount of overprovisioned memory',\n        expr: stripIndent`\n        filter @type = \"REPORT\" |\n        stats max(@memorySize / 1024 / 1024) as provisonedMemoryMB,\n              min(@maxMemoryUsed / 1024 / 1024) as smallestMemoryRequestMB,\n              avg(@maxMemoryUsed / 1024 / 1024) as avgMemoryUsedMB,\n              max(@maxMemoryUsed / 1024 / 1024) as maxMemoryUsedMB,\n              provisonedMemoryMB - maxMemoryUsedMB as overProvisionedMB`,\n      },\n      {\n        title: 'Find the most expensive requests',\n        expr: stripIndents`filter @type = \"REPORT\" |\n                           fields @requestId, @billedDuration |\n                           sort by @billedDuration desc`,\n      },\n    ],\n  },\n\n  {\n    category: 'VPC Flow Logs',\n    examples: [\n      {\n        title: 'Average, min, and max byte transfers by source and destination IP addresses',\n        expr: `stats avg(bytes), min(bytes), max(bytes) by srcAddr, dstAddr`,\n      },\n      {\n        title: 'IP addresses using UDP transfer protocol',\n        expr: 'filter protocol=17 | stats count(*) by srcAddr',\n      },\n      {\n        title: 'Top 10 byte transfers by source and destination IP addresses',\n        expr: stripIndents`stats sum(bytes) as bytesTransferred by srcAddr, dstAddr |\n                           sort bytesTransferred desc |\n                           limit 10`,\n      },\n      {\n        title: 'Top 20 source IP addresses with highest number of rejected requests',\n        expr: stripIndents`filter action=\"REJECT\" |\n                           stats count(*) as numRejections by srcAddr |\n                           sort numRejections desc |\n                           limit 20`,\n      },\n    ],\n  },\n  {\n    category: 'CloudTrail',\n    examples: [\n      {\n        title: 'Number of log entries by service, event type, and region',\n        expr: 'stats count(*) by eventSource, eventName, awsRegion',\n      },\n\n      {\n        title: 'Number of log entries by region and EC2 event type',\n        expr: stripIndents`filter eventSource=\"ec2.amazonaws.com\" |\n                           stats count(*) as eventCount by eventName, awsRegion |\n                           sort eventCount desc`,\n      },\n\n      {\n        title: 'Regions, usernames, and ARNs of newly created IAM users',\n        expr: stripIndents`filter eventName=\"CreateUser\" |\n                           fields awsRegion, requestParameters.userName, responseElements.user.arn`,\n      },\n    ],\n  },\n  {\n    category: 'Common Queries',\n    examples: [\n      {\n        title: '25 most recently added log events',\n        expr: stripIndents`fields @timestamp, @message |\n                           sort @timestamp desc |\n                           limit 25`,\n      },\n      {\n        title: 'Number of exceptions logged every 5 minutes',\n        expr: stripIndents`filter @message like /Exception/ |\n                           stats count(*) as exceptionCount by bin(5m) |\n                           sort exceptionCount desc`,\n      },\n      {\n        title: 'List of log events that are not exceptions',\n        expr: 'fields @message | filter @message not like /Exception/',\n      },\n    ],\n  },\n  {\n    category: 'Route 53',\n    examples: [\n      {\n        title: 'Number of requests received every 10  minutes by edge location',\n        expr: 'stats count(*) by queryType, bin(10m)',\n      },\n      {\n        title: 'Number of unsuccessful requests by domain',\n        expr: 'filter responseCode=\"SERVFAIL\" | stats count(*) by queryName',\n      },\n      {\n        title: 'Number of requests received every 10  minutes by edge location',\n        expr: 'stats count(*) as numRequests by resolverIp | sort numRequests desc | limit 10',\n      },\n    ],\n  },\n  {\n    category: 'AWS AppSync',\n    examples: [\n      {\n        title: 'Number of unique HTTP status codes',\n        expr: stripIndents`fields ispresent(graphQLAPIId) as isApi |\n                           filter isApi |\n                           filter logType = \"RequestSummary\" |\n                           stats count() as statusCount by statusCode |\n                           sort statusCount desc`,\n      },\n      {\n        title: 'Top 10 resolvers with maximum latency',\n        expr: stripIndents`fields resolverArn, duration |\n                           filter logType = \"Tracing\" |\n                           sort duration desc |\n                           limit 10`,\n      },\n      {\n        title: 'Most frequently invoked resolvers',\n        expr: stripIndents`fields ispresent(resolverArn) as isRes |\n                           stats count() as invocationCount by resolverArn |\n                           filter isRes |\n                           filter logType = \"Tracing\" |\n                           sort invocationCount desc |\n                           limit 10`,\n      },\n      {\n        title: 'Resolvers with most errors in mapping templates',\n        expr: stripIndents`fields ispresent(resolverArn) as isRes |\n                           stats count() as errorCount by resolverArn, logType |\n                           filter isRes and (logType = \"RequestMapping\" or logType = \"ResponseMapping\") and fieldInError |\n                           sort errorCount desc |\n                           limit 10`,\n      },\n      {\n        title: 'Field latency statistics',\n        expr: stripIndents`fields requestId, latency |\n                           filter logType = \"RequestSummary\" |\n                           sort latency desc |\n                           limit 10`,\n      },\n      {\n        title: 'Resolver latency statistics',\n        expr: stripIndents`fields ispresent(resolverArn) as isRes |\n                           filter isRes |\n                           filter logType = \"Tracing\" |\n                           stats min(duration), max(duration), avg(duration) as avgDur by resolverArn |\n                           sort avgDur desc |\n                           limit 10`,\n      },\n      {\n        title: 'Top 10 requests with maximum latency',\n        expr: stripIndents`fields requestId, latency |\n                           filter logType = \"RequestSummary\" |\n                           sort latency desc |\n                           limit 10`,\n      },\n    ],\n  },\n];\n\nfunction renderHighlightedMarkup(code: string, keyPrefix: string) {\n  const grammar = tokenizer;\n  const tokens = flattenTokens(Prism.tokenize(code, grammar));\n  const spans = tokens\n    .filter((token) => typeof token !== 'string')\n    .map((token, i) => {\n      return (\n        <span\n          className={`prism-token token ${token.types.join(' ')} ${token.aliases.join(' ')}`}\n          key={`${keyPrefix}-token-${i}`}\n        >\n          {token.content}\n        </span>\n      );\n    });\n\n  return <div className=\"slate-query-field\">{spans}</div>;\n}\n\nconst exampleCategory = css`\n  margin-top: 5px;\n`;\n\nexport default class LogsCheatSheet extends PureComponent<\n  QueryEditorHelpProps<CloudWatchQuery>,\n  { userExamples: string[] }\n> {\n  onClickExample(query: CloudWatchQuery) {\n    this.props.onClickExample(query);\n  }\n\n  renderExpression(expr: string, keyPrefix: string) {\n    return (\n      <div\n        className=\"cheat-sheet-item__example\"\n        key={expr}\n        onClick={(e) =>\n          this.onClickExample({ refId: 'A', expression: expr, queryMode: 'Logs', region: 'default', id: 'A' })\n        }\n      >\n        <pre>{renderHighlightedMarkup(expr, keyPrefix)}</pre>\n      </div>\n    );\n  }\n\n  renderLogsCheatSheet() {\n    return (\n      <div>\n        <h2>CloudWatch Logs Cheat Sheet</h2>\n        {CLIQ_EXAMPLES.map((cat, i) => (\n          <div key={`${cat.category}-${i}`}>\n            <div className={`cheat-sheet-item__title ${cx(exampleCategory)}`}>{cat.category}</div>\n            {cat.examples.map((item, j) => (\n              <div className=\"cheat-sheet-item\" key={`item-${j}`}>\n                <h4>{item.title}</h4>\n                {this.renderExpression(item.expr, `item-${j}`)}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <h3>CloudWatch Logs cheat sheet</h3>\n        {CLIQ_EXAMPLES.map((cat, i) => (\n          <div key={`cat-${i}`}>\n            <div className={`cheat-sheet-item__title ${cx(exampleCategory)}`}>{cat.category}</div>\n            {cat.examples.map((item, j) => (\n              <div className=\"cheat-sheet-item\" key={`item-${j}`}>\n                <h4>{item.title}</h4>\n                {this.renderExpression(item.expr, `item-${j}`)}\n              </div>\n            ))}\n          </div>\n        ))}\n      </div>\n    );\n  }\n}\n","import './query_parameter_ctrl';\nimport { DataSourcePlugin } from '@grafana/data';\nimport { ConfigEditor } from './components/ConfigEditor';\nimport { CloudWatchDatasource } from './datasource';\nimport { CloudWatchAnnotationsQueryCtrl } from './annotations_query_ctrl';\nimport { CloudWatchJsonData, CloudWatchQuery } from './types';\nimport { CloudWatchLogsQueryEditor } from './components/LogsQueryEditor';\nimport { PanelQueryEditor } from './components/PanelQueryEditor';\nimport LogsCheatSheet from './components/LogsCheatSheet';\nimport { LiveMeasurementsSupport } from 'app/features/live/measurements/measurementsSupport';\n\nexport const plugin = new DataSourcePlugin<CloudWatchDatasource, CloudWatchQuery, CloudWatchJsonData>(\n  CloudWatchDatasource\n)\n  .setQueryEditorHelp(LogsCheatSheet)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(PanelQueryEditor)\n  .setExploreMetricsQueryField(PanelQueryEditor)\n  .setExploreLogsQueryField(CloudWatchLogsQueryEditor)\n  .setAnnotationQueryCtrl(CloudWatchAnnotationsQueryCtrl)\n  .setChannelSupport(new LiveMeasurementsSupport());\n","import React, { FC, useEffect, useState } from 'react';\nimport { Input, InlineField } from '@grafana/ui';\nimport { DataSourcePluginOptionsEditorProps, onUpdateDatasourceJsonDataOption } from '@grafana/data';\nimport { ConnectionConfig } from '@grafana/aws-sdk';\n\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\nimport { store } from 'app/store/store';\nimport { notifyApp } from 'app/core/actions';\nimport { createWarningNotification } from 'app/core/copy/appNotification';\n\nimport { CloudWatchJsonData, CloudWatchSecureJsonData } from '../types';\nimport { CloudWatchDatasource } from '../datasource';\n\nexport type Props = DataSourcePluginOptionsEditorProps<CloudWatchJsonData, CloudWatchSecureJsonData>;\n\nexport const ConfigEditor: FC<Props> = (props: Props) => {\n  const [datasource, setDatasource] = useState<CloudWatchDatasource>();\n  const { options } = props;\n\n  const addWarning = (message: string) => {\n    store.dispatch(notifyApp(createWarningNotification('CloudWatch Authentication', message)));\n  };\n\n  useEffect(() => {\n    getDatasourceSrv()\n      .loadDatasource(options.name)\n      .then((datasource: CloudWatchDatasource) => setDatasource(datasource));\n\n    if (options.jsonData.authType === 'arn') {\n      addWarning('Since grafana 7.3 authentication type \"arn\" is deprecated, falling back to default SDK provider');\n    } else if (options.jsonData.authType === 'credentials' && !options.jsonData.profile && !options.jsonData.database) {\n      addWarning(\n        'As of grafana 7.3 authentication type \"credentials\" should be used only for shared file credentials. \\\n             If you don\\'t have a credentials file, switch to the default SDK provider for extracting credentials \\\n             from environment variables or IAM roles'\n      );\n    }\n  }, [options.jsonData.authType, options.jsonData.database, options.jsonData.profile, options.name]);\n\n  return (\n    <>\n      <ConnectionConfig\n        {...props}\n        loadRegions={\n          datasource &&\n          (() => datasource!.getRegions().then((r) => r.filter((r) => r.value !== 'default').map((v) => v.value)))\n        }\n      >\n        <InlineField label=\"Namespaces of Custom Metrics\" labelWidth={28} tooltip=\"Namespaces of Custom Metrics.\">\n          <Input\n            width={60}\n            placeholder=\"Namespace1,Namespace2\"\n            value={options.jsonData.customMetricsNamespaces || ''}\n            onChange={onUpdateDatasourceJsonDataOption(props, 'customMetricsNamespaces')}\n          />\n        </InlineField>\n      </ConnectionConfig>\n    </>\n  );\n};\n"],"sourceRoot":""}